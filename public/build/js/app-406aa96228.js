!function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,t,a){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t){jQuery(document).ready(function(e){function t(){if(window.location.href.indexOf("&")==-1)return null;for(var e,t=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),a=[],n=0;n<t.length;n++)e=t[n].split("="),"_token"!=e[0]&&(a[e[0]]=e[1]);return a}function a(e){function t(e){}var a={method:"feed",link:e};FB.ui(a,t)}function n(){var t=e("#tlu_email").val(),a=e(".contact-email");a.each(function(a){e(this).val(t)})}e.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),e("#project_start").datetimepicker({format:"L"}),e("#project_end").datetimepicker({format:"L"}),e("#join_deadline").datetimepicker({format:"L"}),e(".evaluation-dates").datetimepicker({format:"L"}),e("#project_start").datetimepicker(),e("#project_end").datetimepicker({useCurrent:!1}),e("#project_start").on("dp.change",function(t){e("#project_end").data("DateTimePicker").minDate(t.date)}),e("#project_end").on("dp.change",function(t){e("#project_start").data("DateTimePicker").maxDate(t.date)}),e("input #tags").on("change",function(t){var a=e(t.target),n=a.closest(".example"),i=a.val();null===i&&(i="null"),e("code",e("pre.val",n)).html(e.isArray(i)?JSON.stringify(i):'"'+i.replace('"','\\"')+'"'),e("code",e("pre.items",n)).html(JSON.stringify(a.tagsinput("items")))}).trigger("change"),e("button#delete").on("click",function(t){swal({title:window.Laravel.are_you_sure_notification,text:window.Laravel.cannot_restore_notification,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:window.Laravel.yes_delete,cancelButtonText:window.Laravel.no,closeOnConfirm:!1},function(){e(t.target).prev(".delete-project").submit()})}),e("button#delete-user-button").on("click",function(t){swal({title:window.Laravel.are_you_sure_notification,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:window.Laravel.yes_delete,cancelButtonText:window.Laravel.no,closeOnConfirm:!1},function(){e(t.target).prev(".delete-user").submit()})}),e("a#groups-finish-button").on("click",function(t){e("a#groups-finish-button").hasClass("not-empty")||(t.preventDefault(),swal({title:window.Laravel.finish_project_notification,type:"info",confirmButtonText:window.Laravel.yes,closeOnConfirm:!1}))}),e(".js-example-basic-multiple").select2(),e(".js-users-data-ajax").select2({placeholder:window.Laravel.name_or_email_placeholder,language:{inputTooShort:function(){return window.Laravel.three_or_more_char}},allowClear:!0,ajax:{url:window.Laravel.search_user_api_url,dataType:"json",delay:250,method:"POST",data:function(t){return{q:t.term,project_id:e(".js-users-data-ajax").attr("project-id"),page:t.page}},processResults:function(t){return{results:e.map(t,function(e){return{text:(e.full_name?e.full_name:e.name)+" ("+(e.contact_email?e.contact_email:e.email)+")",id:e.id}})}},cache:!1},escapeMarkup:function(e){return e},minimumInputLength:3}),e('body.frontpage a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=e(this.hash);if(t=t.length?t:e("[name="+this.hash.slice(1)+"]"),t.length)return e("html, body").animate({scrollTop:t.offset().top},1e3),!1}});var i=window.location.hash;i.startsWith("#item")&&i&&e('ul.nav a[href="'+i+'"]').tab("show"),e(".search-panel .navbar-nav").find("a").click(function(t){t.preventDefault();var a=e(this).attr("href").replace("#",""),n=e(this).text();e(".search-panel span#search_concept").text(n),e(".form-group #search_param").val(a)}),e(".dropdown-row").css("height","34.8667px"),e(".dropdown-row").children().css("padding-left","5px");var r=t();r&&r.sort_param?null!=r.sort_param&&(e("#sort-select").css("visibility","visible"),e('input[name="sort_param"][value="'+r.sort_param+'"]').prop("checked",!0),e('input[name="sort_param"]:not(:checked)').siblings().removeClass("glyphicon-sort-by-alphabet glyphicon-sort-by-alphabet-alt").addClass("glyphicon-sort"),r.sort_type&&"desc"!=r.sort_type?"asc"==r.sort_type&&e('input[name="sort_param"]:checked').siblings().removeClass("glyphicon-sort glyphicon-sort-by-alphabet-alt").addClass("glyphicon-sort-by-alphabet"):e('input[name="sort_param"]:checked').siblings().removeClass("glyphicon-sort glyphicon-sort-by-alphabet").addClass("glyphicon-sort-by-alphabet-alt")):(e("#sort-select").css("visibility","hidden"),e("#sort-select").children().find("span").removeClass("glyphicon-sort-by-alphabet glyphicon-sort-by-alphabet-alt").addClass("glyphicon-sort")),e("#sort").click(function(t){t.preventDefault(),"hidden"==e("#sort-select").css("visibility")?e("#sort-select").css("visibility","visible"):(e("#sort-select").css("visibility","hidden"),e("#sort-select").children().children().prop("checked",!1))}),e(".sort-button").parent().click(function(){e(this).children().prop("checked",!0);var a=t();if(null!=a)for(key in a)"sort_param"!=key&&"sort_type"!=key&&e("input[name="+key+"]").val(a[key]);null!=a&&"asc"==a.sort_type&&a.sort_param==e(this).children().val()?e("#subform").append('<input type="hidden" name="sort_type" value="desc" />'):e("#subform").append('<input type="hidden" name="sort_type" value="asc" />'),e("#subform").submit()});var r=t();r&&r.filter_param?null!=r.sort_param&&e("#filter-select").css("visibility","visible"):e("#filter-select").css("visibility","hidden"),e("#filter").click(function(t){t.preventDefault(),"hidden"==e("#filter-select").css("visibility")?e("#filter-select").css("visibility","visible"):(e("#filter-select").css("visibility","hidden"),e("#filter-select").children().children().prop("checked",!1))}),e("#filter-select").children().click(function(){1!=e(this).children().prop("checked")?e(this).children().prop("checked",!0):e(this).children().prop("checked",!1);var a=t();if(null!=a)for(key in a)"filter_param"!=key&&e("input[name="+key+"]").val(a[key]);2==e('input[name="filter_param"]:not(:checked)').length||0==e('input[name="filter_param"]:not(:checked)').length?e("input[name=filter_param]").val(""):e("input[name=filter_param]").val(e('input[name="filter_param"]:checked').val()),e("#subform").submit()}),e("#filter-select").children().children().click(function(){1!=e(this).prop("checked")?e(this).prop("checked",!0):e(this).prop("checked",!1);var a=t();if(null!=a)for(key in a)"filter_param"!=key&&e("input[name="+key+"]").val(a[key]);e("#subform").append('<input type="hidden" name="filter_param">'),2==e('input[name="filter_param"]:not(:checked)').length||0==e('input[name="filter_param"]:not(:checked)').length?e("input[name=filter_param]").val(""):e("input[name=filter_param]").val(e('input[name="filter_param"]:checked').val()),e("#subform").submit()});var o=".search-panel .navbar-nav li";if(e(o).on("click",function(){e(o).removeClass("active"),e(this).addClass("active")}),e(".panel-heading span.clickable").parents(".panel").find(".panel-body").slideUp(),e(".panel-heading span.clickable").on("click",function(t){var a=e(this);a.hasClass("panel-collapsed")?(a.parents(".panel").find(".panel-body").slideDown(),a.removeClass("panel-collapsed"),a.find("i").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up")):(a.parents(".panel").find(".panel-body").slideUp(),a.addClass("panel-collapsed"),a.find("i").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"))}),e(".btnShare").click(function(){return elem=e(this),a(elem.prop("href")),!1}),tinyMCE.baseURL=window.Laravel.base_path+"/js/tinymce",tinymce.init({mode:"textareas",theme:"modern",language:window.Laravel.language,plugins:["link","paste"],menubar:!1,toolbar:"link",removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}],selection_toolbar:"bold italic | quicklink h2 h3 blockquote",editor_selector:"mceSimpleLink",paste_as_text:!0}),tinyMCE.init({mode:"textareas",language:window.Laravel.language,plugins:["link","lists","paste","noneditable","preventdelete"],height:"350",removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}],toolbar:"redo undo bold italic numlist bullist link",menubar:!1,editor_selector:"mceSimple",paste_as_text:!0}),"en"==window.Laravel.language?e(".block01.block01b > .pad").css("background","url(css/bg05_en.png) no-repeat 50% 50%"):e(".block01.block01b > .pad").css("background","url(css/bg05.png) no-repeat 50% 50%"),e("input[name='share_url']").on("click",function(){e(this).select()}),e("#project_all_members").length){var l=window.location.pathname,s=l.split("/"),c=s[s.length-2];Sortable.create(project_all_members,{group:{name:"project-all-members",pull:!0,put:!0},animation:150,handle:".drag-handle"});var p=e(".project-group");e(p).each(function(t,a){Sortable.create(a,{group:{name:p.attr("group-id"),pull:!0,put:function(){return!0}},animation:150,handle:".drag-handle",onAdd:function(t){var a=t.item,n=t.from;e.ajax({url:window.Laravel.add_user_to_group_api_url,dataType:"json",delay:250,method:"POST",cache:!1,data:{id:c,to:e(a).parent().attr("group-id"),from:e(n).attr("group-id"),user:e(a).attr("user-id")}}).done(function(t){e("a#groups-finish-button").length&&e("a#groups-finish-button").addClass("not-empty")})}})})}e("#filler").click(n),e("#institution").on("change",function(){e(this).val()===window.Laravel.other_institution?e("#other-institution").show():e("#other-institution").hide()});var d=e(".add_links_field_button");d.each(function(t,a){var n=e(a).attr("group-id");e(a).click(function(t){t.preventDefault();var a=e(this).next(".group-materials").children().last(),i=a.prop("id");i=parseInt(i.split("_").pop());var r=e(a).clone();r.prop("id","group_materials_"+n+"_"+(i+1)),r.find("input").val(""),r.insertAfter(a);var o=r.find(".tags");r.find(".bootstrap-tagsinput").remove(),e(o).attr("name","group_material_tags["+n+"][]"),e(o).addClass("form-control tags"),o.tagsinput(),o.tagsinput("removeAll")})});var u=e(".remove_links_field_button");u.each(function(t,a){e(a).attr("group-id");e(a).click(function(t){t.preventDefault();var a=e(this).parent().children(":last-child"),n=a.prop("id");n=parseInt(n.split("_").pop()),n>0&&a.remove()})}),e('[data-toggle="popover"]').popover(),e("#clear-embedded").click(function(){e("#embedded").val("")}),e("#clear-group-embedded").click(function(){e(this).prev("input").val("")}),e("body").tooltip({selector:'[rel="tooltip"]'}),e(".group-name").editable({send:"always",ajaxOptions:{dataType:"json",type:"post"},params:function(t){return t.id=e(this).closest("div").attr("project-id"),t}})}),Dropzone.autoDiscover=!1,Dropzone.prototype.defaultOptions.dictRemoveFile=window.Laravel.remove_file_button;var a=$(".dropzone");a.each(function(e){var t=parseInt($(this).prop("id").match(/\d+/g),10),a=$("#groupImagesUpload"+t).attr("project-id"),n="#groupImagesUpload"+t;new Dropzone(n,{url:window.Laravel.base_path+"/project/"+a+"/finish/uploadFiles",params:{id:a,_token:window.Laravel.csfr_token,group_id:t},parallelUploads:20,paramName:"file",maxFilesize:2,addRemoveLinks:!0,init:function(){var e=this;$.get(window.Laravel.base_path+"/project/"+a+"/api/group-images?groupid="+t,function(a){$.each(a.images,function(a,n){var i={name:n.name,size:n.size};e.options.addedfile.call(e,i),e.createThumbnailFromUrl(i,window.Laravel.base_path+"/storage/projects_groups_images/"+t+"/"+n.name),e.emit("complete",i);var r=i.previewElement.querySelector("[data-dz-remove]");r.setAttribute("id","delete-media-name-"+n.name)})}),this.on("removedfile",function(e){var n=e.previewElement.querySelector("[data-dz-remove]");if(n.hasAttribute("id"))var i=n.getAttribute("id").split("-").pop();$.ajax({url:window.Laravel.base_path+"/project/"+a+"/finish/deleteFile",dataType:"json",delay:250,method:"POST",cache:!1,data:{id:a,name:i,group_id:t}}).done(function(e){})})},success:function(e,t){var a=e.previewElement.querySelector("[data-dz-name]");a.innerHTML=t.newfilename;var n=e.previewElement.querySelector("[data-dz-remove]");n.setAttribute("id","delete-media-name-"+t.newfilename)}})}),function(){var e={initialize:function(){this.methodLinks=$("a[data-method]"),this.token=$("a[data-token]"),this.registerEvents()},registerEvents:function(){this.methodLinks.on("click",this.handleMethod)},handleMethod:function(t){var a,n=$(this),i=n.data("method").toUpperCase();if($.inArray(i,["PUT","DELETE"])!==-1){if(n.data("confirm")&&!e.verifyConfirm(n))return!1;a=e.createForm(n),a.submit(),t.preventDefault()}},verifyConfirm:function(e){return confirm(e.data("confirm"))},createForm:function(e){var t=$("<form>",{method:"POST",action:e.attr("href")}),a=$("<input>",{type:"hidden",name:"_token",value:e.data("token")}),n=$("<input>",{name:"_method",type:"hidden",value:e.data("method")});return t.append(a,n).appendTo("body")}};e.initialize()}()}]);