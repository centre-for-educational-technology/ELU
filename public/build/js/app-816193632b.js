!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t){jQuery(document).ready(function(e){function t(e){function t(e){}var n={method:"feed",link:e};FB.ui(n,t)}function n(t){newTag=document.createElement("span"),newTag.className="tag_output",newTag.innerHTML=e("input.tags_"+t).val()+"<span class='glyphicon glyphicon-remove'></span>",e(newTag).children("span.glyphicon-remove").on("click",function(){e(this).parent().remove()}),e("#tags_"+t+"_output").append(newTag)}function i(t){return newCosupervisorSelect=document.createElement("select"),newCosupervisorSelect.className="form-control co_supervisor",cosupervisorOption=document.createElement("option"),cosupervisorOption.value="-1",cosupervisorOption.innerHTML=" ",newCosupervisorSelect.append(cosupervisorOption),e.ajax({url:window.Laravel.base_path+"/api/teachers/get",dataType:"json",method:"POST"}).done(function(e){for(var n=0;n<e.length;n++)cosupervisorOption=document.createElement("option"),cosupervisorOption.value=e[n].id,null!=t&&e[n].id==t&&(cosupervisorOption.selected=!0),cosupervisorOption.innerHTML=e[n].full_name,newCosupervisorSelect.append(cosupervisorOption)}),newCosupervisorSelect}function a(t){return outerDiv=document.createElement("div"),outerDiv.className="row",iconDiv=document.createElement("div"),iconDiv.className="col-lg-4",iconCalendarDiv=document.createElement("div"),iconCalendarDiv.className="col-lg-12",iconCalendar=document.createElement("span"),iconCalendar.className="glyphicon glyphicon-calendar",iconCalendar.style="font-size:75px;",iconSubCalendarInputDiv=document.createElement("div"),iconSubCalendarInputDiv.className="col-lg-12",iconSubCalendarInput=document.createElement("input"),iconSubCalendarInput.className="form-control meeting_date_"+t,iconSubCalendarInput.type="text",textareaDiv=document.createElement("div"),textareaDiv.className="col-lg-7",textarea=document.createElement("textarea"),textarea.className="meeting_info_"+t,textarea.style="width: 100%;",textarea.rows="5",iconDiv.append(iconCalendarDiv),iconCalendarDiv.append(iconCalendar),iconDiv.append(iconSubCalendarInputDiv),iconSubCalendarInputDiv.append(iconSubCalendarInput),textareaDiv.append(textarea),outerDiv.append(iconDiv),outerDiv.append(textareaDiv),e(iconSubCalendarInput).pickadate({format:"dd/mm/yyyy"}),e(iconCalendar).on("click",function(t){t.stopPropagation(),e(e(this).parent().siblings().children("input")[0]).pickadate("open")}),outerDiv}function o(t){for(var n=t.length,i="",a=0;a<n-1;a++)" "===t[a]&&" "===t[a+1]||" "===t[a]&&"<"===t[a+1]||">"===t[a-1]&&" "===t[a]||(i+=t[a]);" "!==t[n]&&(i+=t[n-1]);var o=e("<div>").append(i);return r(o),i=o.prop("innerHTML")}function r(t){t.children().length>0&&t.children().each(function(){r(e(this))}),""===t.html()&&t.remove()}function l(){var t=e("#tlu_email").val(),n=e(".contact-email");n.each(function(n){e(this).val(t)})}e.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),e("#project_start").datetimepicker({format:"L"}),e("#project_end").datetimepicker({format:"L"}),e("#join_deadline").datetimepicker({format:"L"}),e(".evaluation-dates").datetimepicker({format:"L"}),e("#project_start").datetimepicker(),e("#project_end").datetimepicker({useCurrent:!1}),e("#project_start").on("dp.change",function(t){e("#project_end").data("DateTimePicker").minDate(t.date)}),e("#project_end").on("dp.change",function(t){e("#project_start").data("DateTimePicker").maxDate(t.date)}),e("input #tags").on("change",function(t){var n=e(t.target),i=n.closest(".example"),a=n.val();null===a&&(a="null"),e("code",e("pre.val",i)).html(e.isArray(a)?JSON.stringify(a):'"'+a.replace('"','\\"')+'"'),e("code",e("pre.items",i)).html(JSON.stringify(n.tagsinput("items")))}).trigger("change"),e("button#delete").on("click",function(t){swal({title:window.Laravel.are_you_sure_notification,text:window.Laravel.cannot_restore_notification,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:window.Laravel.yes_delete,cancelButtonText:window.Laravel.no,closeOnConfirm:!1},function(){e(t.target).prev(".delete-project").submit()})}),e("button#delete-user-button").on("click",function(t){swal({title:window.Laravel.are_you_sure_notification,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:window.Laravel.yes_delete,cancelButtonText:window.Laravel.no,closeOnConfirm:!1},function(){e(t.target).prev(".delete-user").submit()})}),e("a#groups-finish-button").on("click",function(t){e("a#groups-finish-button").hasClass("not-empty")||(t.preventDefault(),swal({title:window.Laravel.finish_project_notification,type:"info",confirmButtonText:window.Laravel.yes,closeOnConfirm:!1}))}),e(".js-example-basic-multiple").select2(),e("#supervisor").select2(),e(".co_supervisor").select2(),e(".js-users-data-ajax").select2({placeholder:window.Laravel.name_or_email_placeholder,language:{inputTooShort:function(){return window.Laravel.three_or_more_char}},allowClear:!0,ajax:{url:window.Laravel.search_user_api_url,dataType:"json",delay:250,method:"POST",data:function(t){return{q:t.term,project_id:e(".js-users-data-ajax").attr("project-id"),page:t.page}},processResults:function(t){return{results:e.map(t,function(e){return{text:(e.full_name?e.full_name:e.name)+" ("+(e.contact_email?e.contact_email:e.email)+")",id:e.id}})}},cache:!1},escapeMarkup:function(e){return e},minimumInputLength:3}),e('body.frontpage a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=e(this.hash);if(t=t.length?t:e("[name="+this.hash.slice(1)+"]"),t.length)return e("html, body").animate({scrollTop:t.offset().top},1e3),!1}});var s=window.location.hash;s.startsWith("#item")&&s&&e('ul.nav a[href="'+s+'"]').tab("show"),e(".search-panel .navbar-nav").find("a").click(function(t){t.preventDefault();var n=e(this).attr("href").replace("#",""),i=e(this).text();e(".search-panel span#search_concept").text(i),e(".form-group #search_param").val(n)});var c=".search-panel .navbar-nav li";e(c).on("click",function(){e(c).removeClass("active"),e(this).addClass("active")}),e(".panel-heading span.clickable").parents(".panel").find(".panel-body").slideUp(),e(".panel-heading span.clickable").on("click",function(t){var n=e(this);n.hasClass("panel-collapsed")?(n.parents(".panel").find(".panel-body").slideDown(),n.removeClass("panel-collapsed"),n.find("i").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up")):(n.parents(".panel").find(".panel-body").slideUp(),n.addClass("panel-collapsed"),n.find("i").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"))}),e(".btnShare").click(function(){return elem=e(this),t(elem.prop("href")),!1}),e(".tags_et").focus(function(){e(this).siblings("span").css("visibility","visible")}),e(".tags_en").focus(function(){e(this).siblings("span").css("visibility","visible")}),e(".tags_et").blur(function(){e(this).siblings("span").css("visibility","hidden")}),e(".tags_en").blur(function(){e(this).siblings("span").css("visibility","hidden")});try{var d=JSON.parse(e("#co_supervisors").val());e(e("#co_supervisor_div").children()[0]).val(d[0]);for(var p=1;p<d.length;p++)e("#co_supervisor_div").append(i(d[p])),e(e(".co_supervisor")[e(".co_supervisor").length-1]).select2()}catch(u){console.log("No previous values for cosupervisors: "+u)}try{var m=JSON.parse(e("#meetings_et").val());e(e(e(e(e("#first_meeting_et").children()[e("#first_meeting_et").children().length-1]).children()[0]).children()[1]).children()[0]).val(m[0][0]),e(e(e(e(e(e("#first_meeting_et").children()[e("#first_meeting_et").children().length-1]).children()[1]).children()[0])[0])[0]).val(m[0][1]);for(var p=1;p<m.length;p++)e("#other_meetings_et").append(a("et")),e(e(e(e(e("#other_meetings_et").children()[e("#other_meetings_et").children().length-1]).children()[0]).children()[1]).children()[0]).val(m[p][0]),e(e(e(e(e(e("#other_meetings_et").children()[e("#other_meetings_et").children().length-1]).children()[1]).children()[0])[0])[0]).val(m[p][1])}catch(u){console.log("No previous values for meetings_et: "+u)}try{var h=JSON.parse(e("#meetings_en").val());e(e(e(e(e("#first_meeting_en").children()[e("#first_meeting_en").children().length-1]).children()[0]).children()[1]).children()[0]).val(h[0][0]),e(e(e(e(e(e("#first_meeting_en").children()[e("#first_meeting_en").children().length-1]).children()[1]).children()[0])[0])[0]).val(h[0][1]);for(var p=1;p<h.length;p++)e("#other_meetings_en").append(a("en")),e(e(e(e(e("#other_meetings_en").children()[e("#other_meetings_en").children().length-1]).children()[0]).children()[1]).children()[0]).val(h[p][0]),e(e(e(e(e(e("#other_meetings_en").children()[e("#other_meetings_en").children().length-1]).children()[1]).children()[0])[0])[0]).val(h[p][1])}catch(u){console.log("No previous values for meetings_en: "+u)}try{for(var v=JSON.parse(e("#keywords_et").val()),p=0;p<v.length;p++)e(".tags_et").val(v[p]),n("et");e(".tags_et").val("")}catch(u){console.log("No previous values for tags_et: "+u)}try{for(var g=JSON.parse(e("#keywords_en").val()),p=0;p<g.length;p++)e(".tags_en").val(g[p]),n("en");e(".tags_en").val("")}catch(u){console.log("No previous values for tags_en: "+u)}if(e("#project_in_english").children("input").on("click",function(){e(".form_english").toggleClass("disabledForm"),e(".form_english").hasClass("disabledForm")?(e(".form_english").find("input").attr("disabled","true"),e(".form_english").find("textarea").attr("disabled","true")):(e(".form_english").find("input").removeAttr("disabled"),e(".form_english").find("textarea").removeAttr("disabled"))}),e("#project_in_estonian").children("input").on("click",function(){e(".form_estonian").toggleClass("disabledForm"),e(".form_estonian").hasClass("disabledForm")?(e(".form_estonian").find("input").attr("disabled","true"),e(".form_estonian").find("textarea").attr("disabled","true")):(e(".form_estonian").find("input").removeAttr("disabled"),e(".form_estonian").find("textarea").removeAttr("disabled"))}),e("#submit_project").on("click",function(t){t.preventDefault();for(var n=[],i=0;i<e("#tags_et_output").children().length;i++)n.push(e("#tags_et_output").children()[i].innerHTML.split("<")[0]);0!=n.length&&e("#keywords_et").val(JSON.stringify(n));for(var a=[],i=0;i<e("#tags_en_output").children().length;i++)a.push(e("#tags_en_output").children()[i].innerHTML.split("<")[0]);0!=a.length&&e("#keywords_en").val(JSON.stringify(a));for(var o=[],r=[],i=0;i<e(".meeting_date_et").length;i++){var l=[];l.push(e(e(".meeting_date_et")[i]).val()),l.push(e(e(".meeting_info_et")[i]).val()),o.push(l)}for(var i=0;i<e(".meeting_date_en").length;i++){var l=[];l.push(e(e(".meeting_date_en")[i]).val()),l.push(e(e(".meeting_info_en")[i]).val()),r.push(l)}""!=o[0][0]&&e("#meetings_et").val(JSON.stringify(o)),""!=r[0][0]&&e("#meetings_en").val(JSON.stringify(r));for(var s=[],i=0;i<e(".co_supervisor").length;i++)"-1"!=e(e(".co_supervisor")[i]).val()&&s.push(e(e(".co_supervisor")[i]).val());""!=e(e(".co_supervisor")[0]).val()&&e("#co_supervisors").val(JSON.stringify(s)),e("#hidden_project_form_submit").trigger("click")}),e(".study_term_button").on("click",function(){e(".study_term_button").removeClass("btn-info"),e(".study_term_button").removeClass("btn-default"),e(this).removeClass("btn-default"),e(this).addClass("btn-info"),e("#"+e(this).attr("id")+"_radio").prop("checked",!0)}),e("#open_learning_outcomes").on("click",function(){e("#learning_outcomes").toggle(100),e("#open_learning_outcomes").toggle(1),e("#close_learning_outcomes").toggle(1)}),e("#close_learning_outcomes").on("click",function(){e("#learning_outcomes").toggle(100),e("#close_learning_outcomes").toggle(1),e("#open_learning_outcomes").toggle(1)}),e("body").on("mouseover",".tt-suggestion",function(){e(".tt-suggestion").removeClass("tt-cursor"),e(this).addClass("tt-cursor")}),e.ajax({url:window.Laravel.base_path+"/all_tags"}).done(function(t){var i=new Bloodhound({local:t.et,queryTokenizer:Bloodhound.tokenizers.whitespace,datumTokenizer:Bloodhound.tokenizers.whitespace}),a=new Bloodhound({local:t.en,queryTokenizer:Bloodhound.tokenizers.whitespace,datumTokenizer:Bloodhound.tokenizers.whitespace});e("input.tags_et").on("keypress",function(t){13!=t.keyCode&&13!=t.which||(t.preventDefault(),n("et"),e(this).val(""))}),e("input.tags_en").on("keypress",function(t){13!=t.keyCode&&13!=t.which||(t.preventDefault(),n("en"),e(this).val(""))}),e("input[name=tags_et]").typeahead({hint:!1,minLength:1,highlight:!0},{name:"tags_et",source:i}),e("input[name=tags_en]").typeahead({hint:!1,minLength:1,highlight:!0},{name:"tags_en",source:a})}),e(".glyphicon-calendar").parent().siblings().children("input").pickadate({format:"dd/mm/yyyy"}),e(".glyphicon-calendar").on("click",function(t){t.stopPropagation(),e(e(this).parent().siblings().children("input")[0]).pickadate("open")}),e("#add_meeting_et").on("click",function(){e("#other_meetings_et").append(a("et"))}),e("#add_meeting_en").on("click",function(){e("#other_meetings_en").append(a("en"))}),e("#remove_meeting_et").on("click",function(){e("#other_meetings_et").children(":last-child").remove()}),e("#remove_meeting_en").on("click",function(){e("#other_meetings_en").children(":last-child").remove()}),e("#add_cosupervisor").on("click",function(){e(this).parent().prev("#co_supervisor_div").append(i(null)),e(e(".co_supervisor")[e(".co_supervisor").length-1]).select2()}),e("#remove_cosupervisor").on("click",function(){e(this).parent().prev("#co_supervisor_div").children(":last-child").remove(),e(this).parent().prev("#co_supervisor_div").children(":last-child").remove()}),tinyMCE.baseURL=window.Laravel.base_path+"/js/tinymce",tinymce.init({mode:"textareas",theme:"modern",language:window.Laravel.language,plugins:["link","paste"],menubar:!1,toolbar:"link",removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}],selection_toolbar:"bold italic | quicklink h2 h3 blockquote",editor_selector:"mceSimpleLink",paste_as_text:!0}),tinyMCE.init({mode:"textareas",language:window.Laravel.language,plugins:["link","lists","paste","noneditable","preventdelete"],height:"350",removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}],toolbar:"redo undo bold italic numlist bullist link",menubar:!1,editor_selector:"mceSimple",paste_as_text:!0}),e("#submit-project-button").on("click",function(t){t.preventDefault(),tinyMCE.triggerSave(),tinyMCE.get("project_outcomes").setContent(o(tinyMCE.get("project_outcomes").getContent().split("&nbsp;").join(" "))),tinyMCE.get("novelty_desc").setContent(o(tinyMCE.get("novelty_desc").getContent().split("&nbsp;").join(" "))),tinyMCE.get("aim").setContent(o(tinyMCE.get("aim").getContent().split("&nbsp;").join(" "))),tinyMCE.get("description").setContent(o(tinyMCE.get("description").getContent().split("&nbsp;").join(" "))),tinyMCE.triggerSave(),e("#project-form").submit()}),"en"==window.Laravel.language?e(".block01.block01b > .pad").css("background","url(css/bg05_en.png) no-repeat 50% 50%"):e(".block01.block01b > .pad").css("background","url(css/bg05.png) no-repeat 50% 50%"),e("input[name='share_url']").on("click",function(){e(this).select()}),e("#project_all_members").length){var _=window.location.pathname,f=_.split("/"),b=f[f.length-2];Sortable.create(project_all_members,{group:{name:"project-all-members",pull:!0,put:!0},animation:150,handle:".drag-handle"});var y=e(".project-group");e(y).each(function(t,n){Sortable.create(n,{group:{name:y.attr("group-id"),pull:!0,put:function(){return!0}},animation:150,handle:".drag-handle",onAdd:function(t){var n=t.item,i=t.from;e.ajax({url:window.Laravel.add_user_to_group_api_url,dataType:"json",delay:250,method:"POST",cache:!1,data:{id:b,to:e(n).parent().attr("group-id"),from:e(i).attr("group-id"),user:e(n).attr("user-id")}}).done(function(t){console.log(t),e("a#groups-finish-button").length&&e("a#groups-finish-button").addClass("not-empty")})}})})}e("#filler").click(l),e("#institution").on("change",function(){e(this).val()===window.Laravel.other_institution?e("#other-institution").show():e("#other-institution").hide()});var w=e(".add_links_field_button");w.each(function(t,n){var i=e(n).attr("group-id");e(n).click(function(t){t.preventDefault();var n=e(this).next(".group-materials").children().last(),a=n.prop("id");a=parseInt(a.split("_").pop());var o=e(n).clone();o.prop("id","group_materials_"+i+"_"+(a+1)),o.find("input").val(""),o.insertAfter(n);var r=o.find(".tags");o.find(".bootstrap-tagsinput").remove(),e(r).attr("name","group_material_tags["+i+"][]"),e(r).addClass("form-control tags"),r.tagsinput(),r.tagsinput("removeAll")})});var k=e(".remove_links_field_button");k.each(function(t,n){e(n).attr("group-id");e(n).click(function(t){t.preventDefault();var n=e(this).parent().children(":last-child"),i=n.prop("id");i=parseInt(i.split("_").pop()),i>0&&n.remove()})}),e('[data-toggle="popover"]').popover(),e("#clear-embedded").click(function(){e("#embedded").val("")}),e("#clear-group-embedded").click(function(){e(this).prev("input").val("")}),e("body").tooltip({selector:'[rel="tooltip"]'}),e(".group-name").editable({send:"always",ajaxOptions:{dataType:"json",type:"post"},params:function(t){return t.id=e(this).closest("div").attr("project-id"),t}})}),Dropzone.autoDiscover=!1,Dropzone.prototype.defaultOptions.dictRemoveFile=window.Laravel.remove_file_button;var n=$(".dropzone");n.each(function(e){if(this.id.indexOf("presentationUpload")!==-1)var t="Poster",n="application/pdf",i=1,a=parseInt($(this).prop("id").match(/\d+/g),10),o=$("#presentationUpload"+a).attr("project-id"),r="#presentationUpload"+a;else var t="Materials",n="",i=100,a=parseInt($(this).prop("id").match(/\d+/g),10),o=$("#materialsUpload"+a).attr("project-id"),r="#materialsUpload"+a;if("student"==this.getAttribute("auth"))var l="finish";else var l="project";new Dropzone(r,{url:window.Laravel.base_path+"/"+l+"/"+o+"/finish/upload"+t,params:{id:o,_token:window.Laravel.csfr_token,group_id:a},timeout:0,parallelUploads:1,paramName:"file",acceptedFiles:n,maxFiles:i,maxFilesize:30,addRemoveLinks:!0,init:function(){var e=this;$.get(window.Laravel.base_path+"/"+l+"/"+o+"/api/group-"+t+"?groupid="+a,function(t){$.each(t.images,function(t,n){var i={name:n.filename,size:n.size};e.options.addedfile.call(e,i),e.createThumbnailFromUrl(i,window.Laravel.base_path+"/storage/projects_groups_images/"+a+"/"+n.name),e.emit("complete",i);var o=i.previewElement.querySelector("[data-dz-remove]");o.setAttribute("id","delete-media-name-"+n.name)})}),this.on("removedfile",function(e){var n=e.previewElement.querySelector("[data-dz-remove]");if(n.hasAttribute("id"))var i=n.getAttribute("id").substr(18);$.ajax({url:window.Laravel.base_path+"/"+l+"/"+o+"/finish/delete"+t,dataType:"json",delay:250,method:"POST",cache:!1,data:{id:o,name:i,group_id:a}}).done(function(e){console.log(e)})})},success:function(e,t){var n=e.previewElement.querySelector("[data-dz-name]");n.innerHTML=t.newfilename;var i=e.previewElement.querySelector("[data-dz-remove]");i.setAttribute("id","delete-media-name-"+t.newfilename),window.alert("Upload successful")}})}),function(){var e={initialize:function(){this.methodLinks=$("a[data-method]"),this.token=$("a[data-token]"),this.registerEvents()},registerEvents:function(){this.methodLinks.on("click",this.handleMethod)},handleMethod:function(t){var n,i=$(this),a=i.data("method").toUpperCase();if($.inArray(a,["PUT","DELETE"])!==-1){if(i.data("confirm")&&!e.verifyConfirm(i))return!1;n=e.createForm(i),n.submit(),t.preventDefault()}},verifyConfirm:function(e){return confirm(e.data("confirm"))},createForm:function(e){var t=$("<form>",{method:"POST",action:e.attr("href")}),n=$("<input>",{type:"hidden",name:"_token",value:e.data("token")}),i=$("<input>",{name:"_method",type:"hidden",value:e.data("method")});return t.append(n,i).appendTo("body")}};e.initialize()}()}]);