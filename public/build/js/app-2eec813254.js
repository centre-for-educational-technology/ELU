/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmory imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmory exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		Object.defineProperty(exports, name, {
/******/ 			configurable: false,
/******/ 			enumerable: true,
/******/ 			get: getter
/******/ 		});
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports) {

eval("jQuery(document).ready(function ($) {\r\n\r\n\r\n  $.ajaxSetup({\r\n    headers: {\r\n      'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n    }\r\n  });\r\n\r\n  // Date picker\r\n  $('#project_start').datetimepicker({\r\n    format: 'L'\r\n  });\r\n\r\n  $('#project_end').datetimepicker({\r\n    format: 'L'\r\n  });\r\n\r\n  $('#join_deadline').datetimepicker({\r\n    format: 'L'\r\n  });\r\n\r\n  $('.evaluation-dates').datetimepicker({\r\n    format: 'L'\r\n  });\r\n\r\n  $('#project_start').datetimepicker();\r\n  $('#project_end').datetimepicker({\r\n    useCurrent: false //Important! See issue #1075\r\n  });\r\n  $(\"#project_start\").on(\"dp.change\", function (e) {\r\n    $('#project_end').data(\"DateTimePicker\").minDate(e.date);\r\n  });\r\n  $(\"#project_end\").on(\"dp.change\", function (e) {\r\n    $('#project_start').data(\"DateTimePicker\").maxDate(e.date);\r\n  });\r\n\r\n\r\n\r\n  // Tags input\r\n  $('input #tags').on('change', function (event) {\r\n    var $element = $(event.target),\r\n      $container = $element.closest('.example');\r\n\r\n    var val = $element.val();\r\n    if (val === null)\r\n      val = \"null\";\r\n    $('code', $('pre.val', $container)).html(($.isArray(val) ? JSON.stringify(val) : \"\\\"\" + val.replace('\"', '\\\\\"') + \"\\\"\"));\r\n    $('code', $('pre.items', $container)).html(JSON.stringify($element.tagsinput('items')));\r\n  }).trigger('change');\r\n\r\n\r\n  // Sweet alert\r\n  $(\"button#delete\").on(\"click\", function (e) {\r\n\r\n    swal({\r\n      title: window.Laravel.are_you_sure_notification,\r\n      text: window.Laravel.cannot_restore_notification,\r\n      type: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#DD6B55\",\r\n      confirmButtonText: window.Laravel.yes_delete,\r\n      cancelButtonText: window.Laravel.no,\r\n      closeOnConfirm: false\r\n    },\r\n      function () {\r\n        $(e.target).prev('.delete-project').submit();\r\n\r\n      });\r\n\r\n  });\r\n\r\n\r\n  $(\"button#delete-user-button\").on(\"click\", function (e) {\r\n\r\n    swal({\r\n      title: window.Laravel.are_you_sure_notification,\r\n      type: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#DD6B55\",\r\n      confirmButtonText: window.Laravel.yes_delete,\r\n      cancelButtonText: window.Laravel.no,\r\n      closeOnConfirm: false\r\n    },\r\n      function () {\r\n        $(e.target).prev('.delete-user').submit();\r\n\r\n      });\r\n\r\n  });\r\n\r\n\r\n  $(\"a#groups-finish-button\").on(\"click\", function (e) {\r\n    if (!$(\"a#groups-finish-button\").hasClass('not-empty')) {\r\n      e.preventDefault();\r\n\r\n      swal({\r\n        title: window.Laravel.finish_project_notification,\r\n        type: \"info\",\r\n        confirmButtonText: window.Laravel.yes,\r\n        closeOnConfirm: false\r\n      });\r\n    }\r\n  });\r\n\r\n  $(\"button#join-project-button\").on(\"click\", function (e) {\r\n    e.preventDefault();\r\n    var user_tlu_student_id = null\r\n    if (window.Laravel.user.tlu_student_id) {\r\n      user_tlu_student_id = JSON.parse(window.Laravel.user.tlu_student_id)[0][0].split(\"@\")[0];\r\n    } else {\r\n      user_tlu_student_id = 0;\r\n    }\r\n    $.ajax({\r\n      url: window.Laravel.base_path + \"/oisJoinConfirmation?oppijaId=\" + user_tlu_student_id + \"&ainekood=YID6001.YM\",\r\n    }).done(function (response) {\r\n      var data = JSON.parse(response);\r\n      var textToDisplay = \"ELU õppeainega liitumiseks kasuta TLÜ kasutajakontot või kirjuta elu@tlu.ee // To join LIFE course please use TLU account or contact elu@tlu.ee\\n\";\r\n      var showConfirm = false;\r\n      if (data.Viga) {\r\n        textToDisplay = data.Viga;\r\n      } else {\r\n        if (window.Laravel.user.tlu_student_id != null) {\r\n          var info = \"\";\r\n          var attendace = \"Registreerud ELU õppeainesse esmakordselt / This is your first registration to LIFE course\\n\";\r\n          if (data.deklaratsioon.onKorduv == true) {\r\n            attendace = \"Olete ELU õppeaine juba läbinud. Osalemiseks kontakteeruge elu@tlu.ee / If you want to join to the LIFE course second time, please contact LIFE coordinators elu@tlu.ee\\n\";\r\n          }\r\n          if (data.deklaratsioon.teade != null) {\r\n            info = \"Info: \" + data.deklaratsioon.teade;\r\n          }\r\n          if (data.deklaratsioon.hind == 0) {\r\n            price_et = \"Tasuta õpe\";\r\n            price_en = \"Tuition-free study\";\r\n          } else {\r\n            price_et = \"Tasuline õpe\";\r\n            price_en = \"Tuition-based study\";\r\n          }\r\n          var price = price_en + \"//\" + price_et + \"\\n\";\r\n          textToDisplay = attendace + price + info;\r\n          if (data.deklaratsioon.saab == true) {\r\n            showConfirm = true;\r\n          }\r\n        }\r\n      }\r\n      swal({\r\n        title: window.Laravel.are_you_sure_notification,\r\n        text: textToDisplay,\r\n        type: \"info\",\r\n        showCancelButton: true,\r\n        showConfirmButton: showConfirm,\r\n        confirmButtonColor: \"#DD6B55\",\r\n        confirmButtonText: window.Laravel.yes,\r\n        cancelButtonText: \"Cancel\",\r\n        closeOnConfirm: false\r\n      },\r\n        function () {\r\n          $(e.target).prev('#join-project').submit();\r\n        });\r\n    });\r\n    /*\r\n    fetch(window.Laravel.base_path+\"/oisJoinConfirmation?oppijaId=\"+\"91980\"+\"&ainekood=YID6001.YM\")\r\n    .then(function (declaration) {\r\n        console.log(declaration);\r\n        swal({\r\n            title: window.Laravel.are_you_sure_notification,\r\n            text: declaration.response,\r\n            type: \"info\",\r\n            showCancelButton: true,\r\n            confirmButtonColor: \"#DD6B55\",\r\n            confirmButtonText: window.Laravel.yes,\r\n            cancelButtonText: window.Laravel.no,\r\n            closeOnConfirm: false\r\n        },\r\n        function(){\r\n            $(e.target).prev('#join-project').submit();\r\n        })\r\n    });\r\n    */\r\n\r\n\r\n  });\r\n\r\n  // Select2\r\n  $(\".js-example-basic-multiple\").select2();\r\n\r\n\r\n\r\n  // Select2 Ajax - attaching users to project team manually\r\n  $(\".js-users-data-ajax\").select2({\r\n    placeholder: window.Laravel.name_or_email_placeholder,\r\n    language: { inputTooShort: function () { return window.Laravel.three_or_more_char; } },\r\n    allowClear: true,\r\n    ajax: {\r\n      url: window.Laravel.search_user_api_url,\r\n      dataType: 'json',\r\n      delay: 250,\r\n      method: 'POST',\r\n      data: function (params) {\r\n        return {\r\n          q: params.term, // search term\r\n          project_id: $('.js-users-data-ajax').attr(\"project-id\"),\r\n          page: params.page\r\n        };\r\n      },\r\n      processResults: function (data) {\r\n        return {\r\n          results: $.map(data, function (item) {\r\n            return {\r\n              text: (item.full_name ? item.full_name : item.name) + ' (' + (item.contact_email ? item.contact_email : item.email) + ')',\r\n              id: item.id\r\n            }\r\n          })\r\n        };\r\n      },\r\n      cache: false\r\n    },\r\n    escapeMarkup: function (markup) { return markup; }, // let our custom formatter work\r\n    minimumInputLength: 3\r\n  });\r\n\r\n  //Smooth scroll for front page\r\n  $('body.frontpage a[href*=\"#\"]:not([href=\"#\"])').click(function () {\r\n    if (location.pathname.replace(/^\\//, '') == this.pathname.replace(/^\\//, '') && location.hostname == this.hostname) {\r\n      var target = $(this.hash);\r\n      target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');\r\n      if (target.length) {\r\n        $('html, body').animate({\r\n          scrollTop: target.offset().top\r\n        }, 1000);\r\n        return false;\r\n      }\r\n    }\r\n  });\r\n\r\n\r\n\r\n  //Go from front page to certain tab in FAQ page\r\n  var hash = window.location.hash;\r\n  if (hash.startsWith('#item')) {\r\n    hash && $('ul.nav a[href=\"' + hash + '\"]').tab('show');\r\n  }\r\n\r\n  //Search form\r\n  $('.search-panel .navbar-nav').find('a').click(function (e) {\r\n    e.preventDefault();\r\n    var param = $(this).attr(\"href\").replace(\"#\", \"\");\r\n    var concept = $(this).text();\r\n    $('.search-panel span#search_concept').text(concept);\r\n    $('.form-group #search_param').val(param);\r\n  });\r\n\r\n  var selector = '.search-panel .navbar-nav li';\r\n\r\n  $(selector).on('click', function () {\r\n    $(selector).removeClass('active');\r\n    $(this).addClass('active');\r\n  });\r\n\r\n\r\n\r\n  //Panel used in search view to show a list of member emails\r\n  $('.panel-heading span.clickable').parents('.panel').find('.panel-body').slideUp();\r\n\r\n  $('.panel-heading span.clickable').on(\"click\", function (e) {\r\n    var $this = $(this);\r\n    if (!$this.hasClass('panel-collapsed')) {\r\n      $this.parents('.panel').find('.panel-body').slideUp();\r\n      $this.addClass('panel-collapsed');\r\n      $this.find('i').removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');\r\n    } else {\r\n      $this.parents('.panel').find('.panel-body').slideDown();\r\n      $this.removeClass('panel-collapsed');\r\n      $this.find('i').removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');\r\n    }\r\n  });\r\n\r\n\r\n  //Facebook sharing button handler, Facebook SDK for JavaScript\r\n  function postToFeed(url) {\r\n    var obj = { method: 'feed', link: url };\r\n    function callback(response) { }\r\n    FB.ui(obj, callback);\r\n  }\r\n\r\n  $('.btnShare').click(function () {\r\n    elem = $(this);\r\n    postToFeed(elem.prop('href'));\r\n\r\n    return false;\r\n  });\r\n\r\n\r\n  //TinyMC\r\n  tinyMCE.baseURL = window.Laravel.base_path + \"/js/tinymce\";\r\n\r\n  tinymce.init({\r\n    mode: \"textareas\",\r\n    theme: \"modern\",\r\n    language: window.Laravel.language,\r\n    plugins: [\"link\", \"paste\"],\r\n    menubar: false,\r\n    toolbar: \"link\",\r\n    removeformat: [\r\n      { selector: 'b,strong,em,i,font,u,strike', remove: 'all', split: true, expand: false, block_expand: true, deep: true },\r\n      { selector: 'span', attributes: ['style', 'class'], remove: 'empty', split: true, expand: false, deep: true },\r\n      { selector: '*', attributes: ['style', 'class'], split: false, expand: false, deep: true, }\r\n    ],\r\n    selection_toolbar: 'bold italic | quicklink h2 h3 blockquote',\r\n    editor_selector: \"mceSimpleLink\",\r\n    paste_as_text: true\r\n  });\r\n\r\n  tinyMCE.init({\r\n    mode: \"textareas\",\r\n    language: window.Laravel.language,\r\n    plugins: [\"link\", \"lists\", \"paste\", \"noneditable\", \"preventdelete\"],\r\n    height: \"350\",\r\n    removeformat: [\r\n      { selector: 'b,strong,em,i,font,u,strike', remove: 'all', split: true, expand: false, block_expand: true, deep: true },\r\n      { selector: 'span', attributes: ['style', 'class'], remove: 'empty', split: true, expand: false, deep: true },\r\n      { selector: '*', attributes: ['style', 'class'], split: false, expand: false, deep: true }\r\n    ],\r\n    toolbar: \"redo undo bold italic numlist bullist link\",\r\n    menubar: false,\r\n    editor_selector: \"mceSimple\",\r\n    paste_as_text: true\r\n  });\r\n\r\n  $('#submit-project-button').on('click', function (e) {\r\n    e.preventDefault();\r\n    tinyMCE.triggerSave();\r\n    if (tinyMCE.get('project_outcomes').getContent() != '') {\r\n      tinyMCE.get('project_outcomes').setContent(removeExcessWhitespaceFromString(tinyMCE.get('project_outcomes').getContent().split('&nbsp;').join(' ')));\r\n    }\r\n    if (tinyMCE.get('novelty_desc').getContent() != '') {\r\n      tinyMCE.get('novelty_desc').setContent(removeExcessWhitespaceFromString(tinyMCE.get('novelty_desc').getContent().split('&nbsp;').join(' ')));\r\n    }\r\n    if (tinyMCE.get('aim').getContent() != '') {\r\n      tinyMCE.get('aim').setContent(removeExcessWhitespaceFromString(tinyMCE.get('aim').getContent().split('&nbsp;').join(' ')));\r\n    }\r\n    if (tinyMCE.get('description').getContent() != '') {\r\n      tinyMCE.get('description').setContent(removeExcessWhitespaceFromString(tinyMCE.get('description').getContent().split('&nbsp;').join(' ')));\r\n    }\r\n    tinyMCE.triggerSave();\r\n    $('#project-form').submit();\r\n  });\r\n\r\n\r\n  function removeExcessWhitespaceFromString(string) {\r\n    var stringLength = string.length;\r\n    var outputString = \"\";\r\n    for (var i = 0; i < stringLength - 1; i++) {\r\n      if (!(string[i] === \" \" && string[i + 1] === \" \" || string[i] === \" \" && string[i + 1] === \"<\" || string[i - 1] === \">\" && string[i] === \" \")) {\r\n        outputString += string[i];\r\n      }\r\n    }\r\n    if (string[stringLength] !== \" \") {\r\n      outputString += string[stringLength - 1]\r\n    }\r\n    // Removing empty tags\r\n    var helper = $('<div>').append(outputString);\r\n    removeEmptyIfNoChildren(helper);\r\n    outputString = helper.prop('innerHTML');\r\n    return outputString;\r\n  }\r\n\r\n  function removeEmptyIfNoChildren(element) {\r\n    if (element.children().length > 0) {\r\n      element.children().each(function () {\r\n        removeEmptyIfNoChildren($(this));\r\n      });\r\n    }\r\n    if (element.html() === \"\") {\r\n      element.remove();\r\n    }\r\n  }\r\n\r\n  //Front page logo translation\r\n  if (window.Laravel.language == 'en') {\r\n    $('.block01.block01b > .pad').css(\"background\", 'url(css/bg05_en.png) no-repeat 50% 50%');\r\n  } else {\r\n    $('.block01.block01b > .pad').css(\"background\", 'url(css/bg05.png) no-repeat 50% 50%');\r\n  }\r\n\r\n\r\n  //Select project share url on click on input\r\n  $(\"input[name='share_url']\").on(\"click\", function () {\r\n    $(this).select();\r\n  });\r\n\r\n\r\n  if ($(\"#project_all_members\").length) {\r\n\r\n    //Project id used by ProjectModerator middleware\r\n    var url = window.location.pathname;\r\n    var segments = url.split('/');\r\n    var project_id = segments[segments.length - 2];\r\n\r\n\r\n    //Drag and drop project group members functionality\r\n    Sortable.create(project_all_members, {\r\n      group: { name: \"project-all-members\", pull: true, put: true },\r\n      animation: 150,\r\n      handle: '.drag-handle'\r\n    });\r\n\r\n    var el = $('.project-group');\r\n    $(el).each(function (i, e) {\r\n      var sortable = Sortable.create(e, {\r\n        group: {\r\n          name: el.attr('group-id'),\r\n          pull: true,\r\n          put: function () {\r\n            return true;\r\n          }\r\n        },\r\n        animation: 150,\r\n        handle: '.drag-handle',\r\n        onAdd: function (evt) {\r\n\r\n          var itemEl = evt.item;  // dragged HTMLElement\r\n          var from = evt.from;\r\n\r\n\r\n          $.ajax({\r\n            url: window.Laravel.add_user_to_group_api_url,\r\n            dataType: 'json',\r\n            delay: 250,\r\n            method: 'POST',\r\n            cache: false,\r\n            data: {\r\n\r\n              id: project_id,\r\n              to: $(itemEl).parent().attr('group-id'),\r\n              from: $(from).attr('group-id'),\r\n              user: $(itemEl).attr('user-id')\r\n\r\n            }\r\n          }).done(function (msg) {\r\n            console.log(msg);\r\n            if ($('a#groups-finish-button').length) {\r\n              $('a#groups-finish-button').addClass('not-empty');\r\n            }\r\n\r\n\r\n          });\r\n\r\n        }\r\n\r\n      });\r\n    })\r\n  }\r\n\r\n\r\n  //Copy user main TLU email into contact email fields, used on profile page\r\n  $(\"#filler\").click(fillValues);\r\n\r\n\r\n  function fillValues() {\r\n    var value = $(\"#tlu_email\").val();\r\n    var fields = $(\".contact-email\");\r\n    fields.each(function (i) {\r\n      $(this).val(value);\r\n    });\r\n  }\r\n\r\n\r\n\r\n  //Add custom institution field in user registration form\r\n  $('#institution').on('change', function () {\r\n    if ($(this).val() === window.Laravel.other_institution) {\r\n      $(\"#other-institution\").show()\r\n    }\r\n    else {\r\n      $(\"#other-institution\").hide()\r\n    }\r\n  });\r\n\r\n\r\n\r\n\r\n  // Add new group links input field\r\n  var add_links_field_buttons = $(\".add_links_field_button\");\r\n\r\n  add_links_field_buttons.each(function (i, obj) {\r\n    var group_id = $(obj).attr(\"group-id\");\r\n    $(obj).click(function (e) {\r\n      e.preventDefault();\r\n      var $div = $(this).next(\".group-materials\").children().last();\r\n\r\n      var num = $div.prop(\"id\");\r\n\r\n      num = parseInt(num.split(\"_\").pop());\r\n\r\n\r\n      var clone = $($div).clone();\r\n      clone.prop('id', 'group_materials_' + group_id + '_' + (num + 1));\r\n      clone.find(\"input\").val(\"\");\r\n      clone.insertAfter($div);\r\n\r\n      var tagsinput = clone.find('.tags');\r\n      clone.find('.bootstrap-tagsinput').remove();\r\n\r\n      $(tagsinput).attr('name', 'group_material_tags[' + group_id + '][]');\r\n      $(tagsinput).addClass('form-control tags');\r\n      tagsinput.tagsinput();\r\n      tagsinput.tagsinput('removeAll');\r\n\r\n\r\n\r\n\r\n\r\n    });\r\n\r\n  });\r\n\r\n\r\n\r\n\r\n  // Remove group links input field\r\n  var remove_links_field_button = $(\".remove_links_field_button\");\r\n\r\n  remove_links_field_button.each(function (i, obj) {\r\n    var group_id = $(obj).attr(\"group-id\");\r\n    $(obj).click(function (e) {\r\n\r\n      e.preventDefault();\r\n      var $div = $(this).parent().children(\":last-child\");\r\n\r\n      var num = $div.prop(\"id\");\r\n\r\n      num = parseInt(num.split(\"_\").pop());\r\n\r\n      if (num > 0) {\r\n        $div.remove();\r\n      }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    });\r\n  });\r\n\r\n\r\n\r\n  $('[data-toggle=\"popover\"]').popover();\r\n\r\n\r\n  $('#clear-embedded').click(function () {\r\n    $('#embedded')\r\n      .val('')\r\n  });\r\n\r\n\r\n  $('#clear-group-embedded').click(function () {\r\n    $(this).prev('input').val('');\r\n  });\r\n\r\n\r\n  $('body').tooltip({\r\n    selector: '[rel=\"tooltip\"]'\r\n  });\r\n\r\n\r\n  //Group title renaming;\r\n  $('.group-name').editable({\r\n    send: 'always',\r\n    ajaxOptions: {\r\n      dataType: 'json',\r\n      type: 'post',\r\n\r\n    },\r\n    params: function (params) {\r\n      //originally params contain pk, name and value\r\n      params.id = $(this).closest(\"div\").attr(\"project-id\");\r\n      return params;\r\n    }\r\n\r\n  });\r\n\r\n\r\n\r\n\r\n\r\n});\r\n\r\nDropzone.autoDiscover = false;\r\nDropzone.prototype.defaultOptions.dictRemoveFile = window.Laravel.remove_file_button;\r\n\r\nvar dropzones = $(\".dropzone\");\r\ndropzones.each(function (i) {\r\n  if (this.id.indexOf(\"presentationUpload\") !== -1) {\r\n    var resourceName = \"Poster\";\r\n    var accepted = \"application/pdf\";\r\n    var maxNumberOfFiles = 1;\r\n    var group_id = parseInt($(this).prop(\"id\").match(/\\d+/g), 10);\r\n\r\n    var project_id = $(\"#presentationUpload\" + group_id).attr(\"project-id\");\r\n    var dropzone_name = \"#presentationUpload\" + group_id;\r\n  } else {\r\n    var resourceName = \"Materials\";\r\n    var accepted = \"\";\r\n    var maxNumberOfFiles = 100;\r\n    var group_id = parseInt($(this).prop(\"id\").match(/\\d+/g), 10);\r\n\r\n    var project_id = $(\"#materialsUpload\" + group_id).attr(\"project-id\");\r\n    var dropzone_name = \"#materialsUpload\" + group_id;\r\n  }\r\n  if (this.getAttribute('auth') == 'student') {\r\n    var routeTo = 'finish';\r\n  } else {\r\n    var routeTo = 'project';\r\n  }\r\n\r\n  var myDropzone = new Dropzone(dropzone_name, {\r\n    url: window.Laravel.base_path + \"/\" + routeTo + \"/\" + project_id + \"/finish/upload\" + resourceName,\r\n    params: {\r\n      id: project_id,\r\n      _token: window.Laravel.csfr_token,\r\n      group_id: group_id\r\n    },\r\n    timeout: 0,\r\n    parallelUploads: 1,\r\n    paramName: \"file\",\r\n    acceptedFiles: accepted,\r\n    maxFiles: maxNumberOfFiles,\r\n    maxFilesize: 30, // MB\r\n\r\n    addRemoveLinks: true,\r\n\r\n    init: function () {\r\n\r\n\r\n      // Add server images\r\n      var myDropzone = this;\r\n\r\n      $.get(window.Laravel.base_path + \"/\" + routeTo + \"/\" + project_id + \"/api/group-\" + resourceName + \"?groupid=\" + group_id, function (data) {\r\n\r\n\r\n        $.each(data.images, function (key, value) {\r\n          var file = { name: value.filename, size: value.size };\r\n          myDropzone.options.addedfile.call(myDropzone, file);\r\n          myDropzone.createThumbnailFromUrl(file, window.Laravel.base_path + \"/storage/projects_groups_images/\" + group_id + \"/\" + value.name);\r\n          myDropzone.emit(\"complete\", file);\r\n          var btndelete = file.previewElement.querySelector(\"[data-dz-remove]\");\r\n          btndelete.setAttribute(\"id\", 'delete-media-name-' + value.name);\r\n\r\n        });\r\n      });\r\n\r\n      this.on(\"removedfile\", function (file) {\r\n\r\n        var btndelete = file.previewElement.querySelector(\"[data-dz-remove]\");\r\n        if (btndelete.hasAttribute(\"id\")) {\r\n          var filename = btndelete.getAttribute(\"id\").substr(18);\r\n        }\r\n\r\n        $.ajax({\r\n          url: window.Laravel.base_path + \"/\" + routeTo + \"/\" + project_id + \"/finish/delete\" + resourceName,\r\n          dataType: 'json',\r\n          delay: 250,\r\n          method: 'POST',\r\n          cache: false,\r\n          data: {\r\n\r\n            id: project_id,\r\n            name: filename,\r\n            group_id: group_id\r\n\r\n          }\r\n        }).done(function (msg) {\r\n          console.log(msg);\r\n\r\n        });\r\n\r\n      });\r\n    },\r\n    success: function (file, serverResponse) {\r\n      var fileuploded = file.previewElement.querySelector(\"[data-dz-name]\");\r\n      fileuploded.innerHTML = serverResponse.newfilename;\r\n      var btndelete = file.previewElement.querySelector(\"[data-dz-remove]\");\r\n      btndelete.setAttribute(\"id\", 'delete-media-name-' + serverResponse.newfilename);\r\n      window.alert('Upload successful');\r\n    }\r\n  });\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\n  Sending DELETE request without a form\r\n  Example:\r\n  <a href=\"posts/2\" data-method=\"delete\" data-token=\"{{csrf_token()}}\">\r\n */\r\n\r\n(function () {\r\n\r\n  var laravel = {\r\n    initialize: function () {\r\n      this.methodLinks = $('a[data-method]');\r\n      this.token = $('a[data-token]');\r\n      this.registerEvents();\r\n    },\r\n\r\n    registerEvents: function () {\r\n      this.methodLinks.on('click', this.handleMethod);\r\n    },\r\n\r\n    handleMethod: function (e) {\r\n      var link = $(this);\r\n      var httpMethod = link.data('method').toUpperCase();\r\n      var form;\r\n\r\n      // If the data-method attribute is not PUT or DELETE,\r\n      // then we don't know what to do. Just ignore.\r\n      if ($.inArray(httpMethod, ['PUT', 'DELETE']) === - 1) {\r\n        return;\r\n      }\r\n\r\n      // Allow user to optionally provide data-confirm=\"Are you sure?\"\r\n      if (link.data('confirm')) {\r\n        if (!laravel.verifyConfirm(link)) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      form = laravel.createForm(link);\r\n      form.submit();\r\n\r\n      e.preventDefault();\r\n    },\r\n\r\n    verifyConfirm: function (link) {\r\n      return confirm(link.data('confirm'));\r\n    },\r\n\r\n    createForm: function (link) {\r\n      var form =\r\n        $('<form>', {\r\n          'method': 'POST',\r\n          'action': link.attr('href')\r\n        });\r\n\r\n      var token =\r\n        $('<input>', {\r\n          'type': 'hidden',\r\n          'name': '_token',\r\n          'value': link.data('token')\r\n        });\r\n\r\n      var hiddenInput =\r\n        $('<input>', {\r\n          'name': '_method',\r\n          'type': 'hidden',\r\n          'value': link.data('method')\r\n        });\r\n\r\n      return form.append(token, hiddenInput)\r\n        .appendTo('body');\r\n    }\r\n  };\r\n\r\n  laravel.initialize();\r\n\r\n})();\r\n\r\n\r\n\r\n// Show or hide additional question input field\r\nvar add_question_field_button = document.querySelector('.add_question_field_button');\r\nvar remove_question_field_button = document.querySelector('.remove_question_field_button');\r\nvar extra_q = document.querySelectorAll('.extra_q');\r\nvar q_counter = -1; // -1 => no additional questions, 0 => one question, 1 => two questions\r\n\r\nif (extra_q.length !== 0) {\r\n  if (!extra_q[0].hasAttribute('hidden')) {\r\n    q_counter = 0;\r\n  }\r\n  if (!extra_q[1].hasAttribute('hidden')) {\r\n    q_counter = 1;\r\n  }\r\n\r\n  var handle_add_button_click = function () {\r\n    if (q_counter < 1) {\r\n      q_counter++;\r\n    }\r\n    extra_q[q_counter].hidden = false;\r\n  }\r\n\r\n  var handle_remove_button_click = function () {\r\n    if (q_counter > -1) {\r\n      extra_q[q_counter].hidden = true;\r\n      //remove user input\r\n      extra_q[q_counter].lastElementChild.firstElementChild.value = '';\r\n      q_counter--;\r\n    }\r\n  }\r\n  add_question_field_button.addEventListener('click', handle_add_button_click);\r\n  remove_question_field_button.addEventListener('click', handle_remove_button_click);\r\n}\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9yZXNvdXJjZXMvYXNzZXRzL2pzL2FwcC5qcz84YjY3Il0sInNvdXJjZXNDb250ZW50IjpbImpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCQpIHtcclxuXHJcblxyXG4gICQuYWpheFNldHVwKHtcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8gRGF0ZSBwaWNrZXJcclxuICAkKCcjcHJvamVjdF9zdGFydCcpLmRhdGV0aW1lcGlja2VyKHtcclxuICAgIGZvcm1hdDogJ0wnXHJcbiAgfSk7XHJcblxyXG4gICQoJyNwcm9qZWN0X2VuZCcpLmRhdGV0aW1lcGlja2VyKHtcclxuICAgIGZvcm1hdDogJ0wnXHJcbiAgfSk7XHJcblxyXG4gICQoJyNqb2luX2RlYWRsaW5lJykuZGF0ZXRpbWVwaWNrZXIoe1xyXG4gICAgZm9ybWF0OiAnTCdcclxuICB9KTtcclxuXHJcbiAgJCgnLmV2YWx1YXRpb24tZGF0ZXMnKS5kYXRldGltZXBpY2tlcih7XHJcbiAgICBmb3JtYXQ6ICdMJ1xyXG4gIH0pO1xyXG5cclxuICAkKCcjcHJvamVjdF9zdGFydCcpLmRhdGV0aW1lcGlja2VyKCk7XHJcbiAgJCgnI3Byb2plY3RfZW5kJykuZGF0ZXRpbWVwaWNrZXIoe1xyXG4gICAgdXNlQ3VycmVudDogZmFsc2UgLy9JbXBvcnRhbnQhIFNlZSBpc3N1ZSAjMTA3NVxyXG4gIH0pO1xyXG4gICQoXCIjcHJvamVjdF9zdGFydFwiKS5vbihcImRwLmNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgJCgnI3Byb2plY3RfZW5kJykuZGF0YShcIkRhdGVUaW1lUGlja2VyXCIpLm1pbkRhdGUoZS5kYXRlKTtcclxuICB9KTtcclxuICAkKFwiI3Byb2plY3RfZW5kXCIpLm9uKFwiZHAuY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAkKCcjcHJvamVjdF9zdGFydCcpLmRhdGEoXCJEYXRlVGltZVBpY2tlclwiKS5tYXhEYXRlKGUuZGF0ZSk7XHJcbiAgfSk7XHJcblxyXG5cclxuXHJcbiAgLy8gVGFncyBpbnB1dFxyXG4gICQoJ2lucHV0ICN0YWdzJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgdmFyICRlbGVtZW50ID0gJChldmVudC50YXJnZXQpLFxyXG4gICAgICAkY29udGFpbmVyID0gJGVsZW1lbnQuY2xvc2VzdCgnLmV4YW1wbGUnKTtcclxuXHJcbiAgICB2YXIgdmFsID0gJGVsZW1lbnQudmFsKCk7XHJcbiAgICBpZiAodmFsID09PSBudWxsKVxyXG4gICAgICB2YWwgPSBcIm51bGxcIjtcclxuICAgICQoJ2NvZGUnLCAkKCdwcmUudmFsJywgJGNvbnRhaW5lcikpLmh0bWwoKCQuaXNBcnJheSh2YWwpID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6IFwiXFxcIlwiICsgdmFsLnJlcGxhY2UoJ1wiJywgJ1xcXFxcIicpICsgXCJcXFwiXCIpKTtcclxuICAgICQoJ2NvZGUnLCAkKCdwcmUuaXRlbXMnLCAkY29udGFpbmVyKSkuaHRtbChKU09OLnN0cmluZ2lmeSgkZWxlbWVudC50YWdzaW5wdXQoJ2l0ZW1zJykpKTtcclxuICB9KS50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuXHJcblxyXG4gIC8vIFN3ZWV0IGFsZXJ0XHJcbiAgJChcImJ1dHRvbiNkZWxldGVcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG5cclxuICAgIHN3YWwoe1xyXG4gICAgICB0aXRsZTogd2luZG93LkxhcmF2ZWwuYXJlX3lvdV9zdXJlX25vdGlmaWNhdGlvbixcclxuICAgICAgdGV4dDogd2luZG93LkxhcmF2ZWwuY2Fubm90X3Jlc3RvcmVfbm90aWZpY2F0aW9uLFxyXG4gICAgICB0eXBlOiBcIndhcm5pbmdcIixcclxuICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSxcclxuICAgICAgY29uZmlybUJ1dHRvbkNvbG9yOiBcIiNERDZCNTVcIixcclxuICAgICAgY29uZmlybUJ1dHRvblRleHQ6IHdpbmRvdy5MYXJhdmVsLnllc19kZWxldGUsXHJcbiAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IHdpbmRvdy5MYXJhdmVsLm5vLFxyXG4gICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2VcclxuICAgIH0sXHJcbiAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKGUudGFyZ2V0KS5wcmV2KCcuZGVsZXRlLXByb2plY3QnKS5zdWJtaXQoKTtcclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICB9KTtcclxuXHJcblxyXG4gICQoXCJidXR0b24jZGVsZXRlLXVzZXItYnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuXHJcbiAgICBzd2FsKHtcclxuICAgICAgdGl0bGU6IHdpbmRvdy5MYXJhdmVsLmFyZV95b3Vfc3VyZV9ub3RpZmljYXRpb24sXHJcbiAgICAgIHR5cGU6IFwid2FybmluZ1wiLFxyXG4gICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxyXG4gICAgICBjb25maXJtQnV0dG9uQ29sb3I6IFwiI0RENkI1NVwiLFxyXG4gICAgICBjb25maXJtQnV0dG9uVGV4dDogd2luZG93LkxhcmF2ZWwueWVzX2RlbGV0ZSxcclxuICAgICAgY2FuY2VsQnV0dG9uVGV4dDogd2luZG93LkxhcmF2ZWwubm8sXHJcbiAgICAgIGNsb3NlT25Db25maXJtOiBmYWxzZVxyXG4gICAgfSxcclxuICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoZS50YXJnZXQpLnByZXYoJy5kZWxldGUtdXNlcicpLnN1Ym1pdCgpO1xyXG5cclxuICAgICAgfSk7XHJcblxyXG4gIH0pO1xyXG5cclxuXHJcbiAgJChcImEjZ3JvdXBzLWZpbmlzaC1idXR0b25cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgaWYgKCEkKFwiYSNncm91cHMtZmluaXNoLWJ1dHRvblwiKS5oYXNDbGFzcygnbm90LWVtcHR5JykpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgc3dhbCh7XHJcbiAgICAgICAgdGl0bGU6IHdpbmRvdy5MYXJhdmVsLmZpbmlzaF9wcm9qZWN0X25vdGlmaWNhdGlvbixcclxuICAgICAgICB0eXBlOiBcImluZm9cIixcclxuICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogd2luZG93LkxhcmF2ZWwueWVzLFxyXG4gICAgICAgIGNsb3NlT25Db25maXJtOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJChcImJ1dHRvbiNqb2luLXByb2plY3QtYnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGxldCB1c2VyX3RsdV9zdHVkZW50X2lkID0gbnVsbFxyXG4gICAgaWYgKHdpbmRvdy5MYXJhdmVsLnVzZXIudGx1X3N0dWRlbnRfaWQpIHtcclxuICAgICAgdXNlcl90bHVfc3R1ZGVudF9pZCA9IEpTT04ucGFyc2Uod2luZG93LkxhcmF2ZWwudXNlci50bHVfc3R1ZGVudF9pZClbMF1bMF0uc3BsaXQoXCJAXCIpWzBdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdXNlcl90bHVfc3R1ZGVudF9pZCA9IDA7XHJcbiAgICB9XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICB1cmw6IHdpbmRvdy5MYXJhdmVsLmJhc2VfcGF0aCArIFwiL29pc0pvaW5Db25maXJtYXRpb24/b3BwaWphSWQ9XCIgKyB1c2VyX3RsdV9zdHVkZW50X2lkICsgXCImYWluZWtvb2Q9WUlENjAwMS5ZTVwiLFxyXG4gICAgfSkuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgbGV0IHRleHRUb0Rpc3BsYXkgPSBcIkVMVSDDtXBwZWFpbmVnYSBsaWl0dW1pc2VrcyBrYXN1dGEgVEzDnCBrYXN1dGFqYWtvbnRvdCB2w7VpIGtpcmp1dGEgZWx1QHRsdS5lZSAvLyBUbyBqb2luIExJRkUgY291cnNlIHBsZWFzZSB1c2UgVExVIGFjY291bnQgb3IgY29udGFjdCBlbHVAdGx1LmVlXFxuXCI7XHJcbiAgICAgIGxldCBzaG93Q29uZmlybSA9IGZhbHNlO1xyXG4gICAgICBpZiAoZGF0YS5WaWdhKSB7XHJcbiAgICAgICAgdGV4dFRvRGlzcGxheSA9IGRhdGEuVmlnYTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAod2luZG93LkxhcmF2ZWwudXNlci50bHVfc3R1ZGVudF9pZCAhPSBudWxsKSB7XHJcbiAgICAgICAgICBsZXQgaW5mbyA9IFwiXCI7XHJcbiAgICAgICAgICBsZXQgYXR0ZW5kYWNlID0gXCJSZWdpc3RyZWVydWQgRUxVIMO1cHBlYWluZXNzZSBlc21ha29yZHNlbHQgLyBUaGlzIGlzIHlvdXIgZmlyc3QgcmVnaXN0cmF0aW9uIHRvIExJRkUgY291cnNlXFxuXCI7XHJcbiAgICAgICAgICBpZiAoZGF0YS5kZWtsYXJhdHNpb29uLm9uS29yZHV2ID09IHRydWUpIHtcclxuICAgICAgICAgICAgYXR0ZW5kYWNlID0gXCJPbGV0ZSBFTFUgw7VwcGVhaW5lIGp1YmEgbMOkYmludWQuIE9zYWxlbWlzZWtzIGtvbnRha3RlZXJ1Z2UgZWx1QHRsdS5lZSAvIElmIHlvdSB3YW50IHRvIGpvaW4gdG8gdGhlIExJRkUgY291cnNlIHNlY29uZCB0aW1lLCBwbGVhc2UgY29udGFjdCBMSUZFIGNvb3JkaW5hdG9ycyBlbHVAdGx1LmVlXFxuXCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoZGF0YS5kZWtsYXJhdHNpb29uLnRlYWRlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgaW5mbyA9IFwiSW5mbzogXCIgKyBkYXRhLmRla2xhcmF0c2lvb24udGVhZGU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoZGF0YS5kZWtsYXJhdHNpb29uLmhpbmQgPT0gMCkge1xyXG4gICAgICAgICAgICBwcmljZV9ldCA9IFwiVGFzdXRhIMO1cGVcIjtcclxuICAgICAgICAgICAgcHJpY2VfZW4gPSBcIlR1aXRpb24tZnJlZSBzdHVkeVwiO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcHJpY2VfZXQgPSBcIlRhc3VsaW5lIMO1cGVcIjtcclxuICAgICAgICAgICAgcHJpY2VfZW4gPSBcIlR1aXRpb24tYmFzZWQgc3R1ZHlcIjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGxldCBwcmljZSA9IHByaWNlX2VuICsgXCIvL1wiICsgcHJpY2VfZXQgKyBcIlxcblwiO1xyXG4gICAgICAgICAgdGV4dFRvRGlzcGxheSA9IGF0dGVuZGFjZSArIHByaWNlICsgaW5mbztcclxuICAgICAgICAgIGlmIChkYXRhLmRla2xhcmF0c2lvb24uc2FhYiA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHNob3dDb25maXJtID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgc3dhbCh7XHJcbiAgICAgICAgdGl0bGU6IHdpbmRvdy5MYXJhdmVsLmFyZV95b3Vfc3VyZV9ub3RpZmljYXRpb24sXHJcbiAgICAgICAgdGV4dDogdGV4dFRvRGlzcGxheSxcclxuICAgICAgICB0eXBlOiBcImluZm9cIixcclxuICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxyXG4gICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBzaG93Q29uZmlybSxcclxuICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6IFwiI0RENkI1NVwiLFxyXG4gICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiB3aW5kb3cuTGFyYXZlbC55ZXMsXHJcbiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogXCJDYW5jZWxcIixcclxuICAgICAgICBjbG9zZU9uQ29uZmlybTogZmFsc2VcclxuICAgICAgfSxcclxuICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAkKGUudGFyZ2V0KS5wcmV2KCcjam9pbi1wcm9qZWN0Jykuc3VibWl0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIC8qXHJcbiAgICBmZXRjaCh3aW5kb3cuTGFyYXZlbC5iYXNlX3BhdGgrXCIvb2lzSm9pbkNvbmZpcm1hdGlvbj9vcHBpamFJZD1cIitcIjkxOTgwXCIrXCImYWluZWtvb2Q9WUlENjAwMS5ZTVwiKVxyXG4gICAgLnRoZW4oZnVuY3Rpb24gKGRlY2xhcmF0aW9uKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGVjbGFyYXRpb24pO1xyXG4gICAgICAgIHN3YWwoe1xyXG4gICAgICAgICAgICB0aXRsZTogd2luZG93LkxhcmF2ZWwuYXJlX3lvdV9zdXJlX25vdGlmaWNhdGlvbixcclxuICAgICAgICAgICAgdGV4dDogZGVjbGFyYXRpb24ucmVzcG9uc2UsXHJcbiAgICAgICAgICAgIHR5cGU6IFwiaW5mb1wiLFxyXG4gICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maXJtQnV0dG9uQ29sb3I6IFwiI0RENkI1NVwiLFxyXG4gICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogd2luZG93LkxhcmF2ZWwueWVzLFxyXG4gICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiB3aW5kb3cuTGFyYXZlbC5ubyxcclxuICAgICAgICAgICAgY2xvc2VPbkNvbmZpcm06IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKGUudGFyZ2V0KS5wcmV2KCcjam9pbi1wcm9qZWN0Jykuc3VibWl0KCk7XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG4gICAgKi9cclxuXHJcblxyXG4gIH0pO1xyXG5cclxuICAvLyBTZWxlY3QyXHJcbiAgJChcIi5qcy1leGFtcGxlLWJhc2ljLW11bHRpcGxlXCIpLnNlbGVjdDIoKTtcclxuXHJcblxyXG5cclxuICAvLyBTZWxlY3QyIEFqYXggLSBhdHRhY2hpbmcgdXNlcnMgdG8gcHJvamVjdCB0ZWFtIG1hbnVhbGx5XHJcbiAgJChcIi5qcy11c2Vycy1kYXRhLWFqYXhcIikuc2VsZWN0Mih7XHJcbiAgICBwbGFjZWhvbGRlcjogd2luZG93LkxhcmF2ZWwubmFtZV9vcl9lbWFpbF9wbGFjZWhvbGRlcixcclxuICAgIGxhbmd1YWdlOiB7IGlucHV0VG9vU2hvcnQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHdpbmRvdy5MYXJhdmVsLnRocmVlX29yX21vcmVfY2hhcjsgfSB9LFxyXG4gICAgYWxsb3dDbGVhcjogdHJ1ZSxcclxuICAgIGFqYXg6IHtcclxuICAgICAgdXJsOiB3aW5kb3cuTGFyYXZlbC5zZWFyY2hfdXNlcl9hcGlfdXJsLFxyXG4gICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICBkZWxheTogMjUwLFxyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgZGF0YTogZnVuY3Rpb24gKHBhcmFtcykge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBxOiBwYXJhbXMudGVybSwgLy8gc2VhcmNoIHRlcm1cclxuICAgICAgICAgIHByb2plY3RfaWQ6ICQoJy5qcy11c2Vycy1kYXRhLWFqYXgnKS5hdHRyKFwicHJvamVjdC1pZFwiKSxcclxuICAgICAgICAgIHBhZ2U6IHBhcmFtcy5wYWdlXHJcbiAgICAgICAgfTtcclxuICAgICAgfSxcclxuICAgICAgcHJvY2Vzc1Jlc3VsdHM6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHJlc3VsdHM6ICQubWFwKGRhdGEsIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgdGV4dDogKGl0ZW0uZnVsbF9uYW1lID8gaXRlbS5mdWxsX25hbWUgOiBpdGVtLm5hbWUpICsgJyAoJyArIChpdGVtLmNvbnRhY3RfZW1haWwgPyBpdGVtLmNvbnRhY3RfZW1haWwgOiBpdGVtLmVtYWlsKSArICcpJyxcclxuICAgICAgICAgICAgICBpZDogaXRlbS5pZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcbiAgICAgIGNhY2hlOiBmYWxzZVxyXG4gICAgfSxcclxuICAgIGVzY2FwZU1hcmt1cDogZnVuY3Rpb24gKG1hcmt1cCkgeyByZXR1cm4gbWFya3VwOyB9LCAvLyBsZXQgb3VyIGN1c3RvbSBmb3JtYXR0ZXIgd29ya1xyXG4gICAgbWluaW11bUlucHV0TGVuZ3RoOiAzXHJcbiAgfSk7XHJcblxyXG4gIC8vU21vb3RoIHNjcm9sbCBmb3IgZnJvbnQgcGFnZVxyXG4gICQoJ2JvZHkuZnJvbnRwYWdlIGFbaHJlZio9XCIjXCJdOm5vdChbaHJlZj1cIiNcIl0pJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCAnJykgPT0gdGhpcy5wYXRobmFtZS5yZXBsYWNlKC9eXFwvLywgJycpICYmIGxvY2F0aW9uLmhvc3RuYW1lID09IHRoaXMuaG9zdG5hbWUpIHtcclxuICAgICAgdmFyIHRhcmdldCA9ICQodGhpcy5oYXNoKTtcclxuICAgICAgdGFyZ2V0ID0gdGFyZ2V0Lmxlbmd0aCA/IHRhcmdldCA6ICQoJ1tuYW1lPScgKyB0aGlzLmhhc2guc2xpY2UoMSkgKyAnXScpO1xyXG4gICAgICBpZiAodGFyZ2V0Lmxlbmd0aCkge1xyXG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgIHNjcm9sbFRvcDogdGFyZ2V0Lm9mZnNldCgpLnRvcFxyXG4gICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuXHJcblxyXG4gIC8vR28gZnJvbSBmcm9udCBwYWdlIHRvIGNlcnRhaW4gdGFiIGluIEZBUSBwYWdlXHJcbiAgdmFyIGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaDtcclxuICBpZiAoaGFzaC5zdGFydHNXaXRoKCcjaXRlbScpKSB7XHJcbiAgICBoYXNoICYmICQoJ3VsLm5hdiBhW2hyZWY9XCInICsgaGFzaCArICdcIl0nKS50YWIoJ3Nob3cnKTtcclxuICB9XHJcblxyXG4gIC8vU2VhcmNoIGZvcm1cclxuICAkKCcuc2VhcmNoLXBhbmVsIC5uYXZiYXItbmF2JykuZmluZCgnYScpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgcGFyYW0gPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpLnJlcGxhY2UoXCIjXCIsIFwiXCIpO1xyXG4gICAgdmFyIGNvbmNlcHQgPSAkKHRoaXMpLnRleHQoKTtcclxuICAgICQoJy5zZWFyY2gtcGFuZWwgc3BhbiNzZWFyY2hfY29uY2VwdCcpLnRleHQoY29uY2VwdCk7XHJcbiAgICAkKCcuZm9ybS1ncm91cCAjc2VhcmNoX3BhcmFtJykudmFsKHBhcmFtKTtcclxuICB9KTtcclxuXHJcbiAgdmFyIHNlbGVjdG9yID0gJy5zZWFyY2gtcGFuZWwgLm5hdmJhci1uYXYgbGknO1xyXG5cclxuICAkKHNlbGVjdG9yKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKHNlbGVjdG9yKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICB9KTtcclxuXHJcblxyXG5cclxuICAvL1BhbmVsIHVzZWQgaW4gc2VhcmNoIHZpZXcgdG8gc2hvdyBhIGxpc3Qgb2YgbWVtYmVyIGVtYWlsc1xyXG4gICQoJy5wYW5lbC1oZWFkaW5nIHNwYW4uY2xpY2thYmxlJykucGFyZW50cygnLnBhbmVsJykuZmluZCgnLnBhbmVsLWJvZHknKS5zbGlkZVVwKCk7XHJcblxyXG4gICQoJy5wYW5lbC1oZWFkaW5nIHNwYW4uY2xpY2thYmxlJykub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgIGlmICghJHRoaXMuaGFzQ2xhc3MoJ3BhbmVsLWNvbGxhcHNlZCcpKSB7XHJcbiAgICAgICR0aGlzLnBhcmVudHMoJy5wYW5lbCcpLmZpbmQoJy5wYW5lbC1ib2R5Jykuc2xpZGVVcCgpO1xyXG4gICAgICAkdGhpcy5hZGRDbGFzcygncGFuZWwtY29sbGFwc2VkJyk7XHJcbiAgICAgICR0aGlzLmZpbmQoJ2knKS5yZW1vdmVDbGFzcygnZ2x5cGhpY29uLWNoZXZyb24tdXAnKS5hZGRDbGFzcygnZ2x5cGhpY29uLWNoZXZyb24tZG93bicpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJHRoaXMucGFyZW50cygnLnBhbmVsJykuZmluZCgnLnBhbmVsLWJvZHknKS5zbGlkZURvd24oKTtcclxuICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ3BhbmVsLWNvbGxhcHNlZCcpO1xyXG4gICAgICAkdGhpcy5maW5kKCdpJykucmVtb3ZlQ2xhc3MoJ2dseXBoaWNvbi1jaGV2cm9uLWRvd24nKS5hZGRDbGFzcygnZ2x5cGhpY29uLWNoZXZyb24tdXAnKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcblxyXG4gIC8vRmFjZWJvb2sgc2hhcmluZyBidXR0b24gaGFuZGxlciwgRmFjZWJvb2sgU0RLIGZvciBKYXZhU2NyaXB0XHJcbiAgZnVuY3Rpb24gcG9zdFRvRmVlZCh1cmwpIHtcclxuICAgIHZhciBvYmogPSB7IG1ldGhvZDogJ2ZlZWQnLCBsaW5rOiB1cmwgfTtcclxuICAgIGZ1bmN0aW9uIGNhbGxiYWNrKHJlc3BvbnNlKSB7IH1cclxuICAgIEZCLnVpKG9iaiwgY2FsbGJhY2spO1xyXG4gIH1cclxuXHJcbiAgJCgnLmJ0blNoYXJlJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgZWxlbSA9ICQodGhpcyk7XHJcbiAgICBwb3N0VG9GZWVkKGVsZW0ucHJvcCgnaHJlZicpKTtcclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfSk7XHJcblxyXG5cclxuICAvL1RpbnlNQ1xyXG4gIHRpbnlNQ0UuYmFzZVVSTCA9IHdpbmRvdy5MYXJhdmVsLmJhc2VfcGF0aCArIFwiL2pzL3RpbnltY2VcIjtcclxuXHJcbiAgdGlueW1jZS5pbml0KHtcclxuICAgIG1vZGU6IFwidGV4dGFyZWFzXCIsXHJcbiAgICB0aGVtZTogXCJtb2Rlcm5cIixcclxuICAgIGxhbmd1YWdlOiB3aW5kb3cuTGFyYXZlbC5sYW5ndWFnZSxcclxuICAgIHBsdWdpbnM6IFtcImxpbmtcIiwgXCJwYXN0ZVwiXSxcclxuICAgIG1lbnViYXI6IGZhbHNlLFxyXG4gICAgdG9vbGJhcjogXCJsaW5rXCIsXHJcbiAgICByZW1vdmVmb3JtYXQ6IFtcclxuICAgICAgeyBzZWxlY3RvcjogJ2Isc3Ryb25nLGVtLGksZm9udCx1LHN0cmlrZScsIHJlbW92ZTogJ2FsbCcsIHNwbGl0OiB0cnVlLCBleHBhbmQ6IGZhbHNlLCBibG9ja19leHBhbmQ6IHRydWUsIGRlZXA6IHRydWUgfSxcclxuICAgICAgeyBzZWxlY3RvcjogJ3NwYW4nLCBhdHRyaWJ1dGVzOiBbJ3N0eWxlJywgJ2NsYXNzJ10sIHJlbW92ZTogJ2VtcHR5Jywgc3BsaXQ6IHRydWUsIGV4cGFuZDogZmFsc2UsIGRlZXA6IHRydWUgfSxcclxuICAgICAgeyBzZWxlY3RvcjogJyonLCBhdHRyaWJ1dGVzOiBbJ3N0eWxlJywgJ2NsYXNzJ10sIHNwbGl0OiBmYWxzZSwgZXhwYW5kOiBmYWxzZSwgZGVlcDogdHJ1ZSwgfVxyXG4gICAgXSxcclxuICAgIHNlbGVjdGlvbl90b29sYmFyOiAnYm9sZCBpdGFsaWMgfCBxdWlja2xpbmsgaDIgaDMgYmxvY2txdW90ZScsXHJcbiAgICBlZGl0b3Jfc2VsZWN0b3I6IFwibWNlU2ltcGxlTGlua1wiLFxyXG4gICAgcGFzdGVfYXNfdGV4dDogdHJ1ZVxyXG4gIH0pO1xyXG5cclxuICB0aW55TUNFLmluaXQoe1xyXG4gICAgbW9kZTogXCJ0ZXh0YXJlYXNcIixcclxuICAgIGxhbmd1YWdlOiB3aW5kb3cuTGFyYXZlbC5sYW5ndWFnZSxcclxuICAgIHBsdWdpbnM6IFtcImxpbmtcIiwgXCJsaXN0c1wiLCBcInBhc3RlXCIsIFwibm9uZWRpdGFibGVcIiwgXCJwcmV2ZW50ZGVsZXRlXCJdLFxyXG4gICAgaGVpZ2h0OiBcIjM1MFwiLFxyXG4gICAgcmVtb3ZlZm9ybWF0OiBbXHJcbiAgICAgIHsgc2VsZWN0b3I6ICdiLHN0cm9uZyxlbSxpLGZvbnQsdSxzdHJpa2UnLCByZW1vdmU6ICdhbGwnLCBzcGxpdDogdHJ1ZSwgZXhwYW5kOiBmYWxzZSwgYmxvY2tfZXhwYW5kOiB0cnVlLCBkZWVwOiB0cnVlIH0sXHJcbiAgICAgIHsgc2VsZWN0b3I6ICdzcGFuJywgYXR0cmlidXRlczogWydzdHlsZScsICdjbGFzcyddLCByZW1vdmU6ICdlbXB0eScsIHNwbGl0OiB0cnVlLCBleHBhbmQ6IGZhbHNlLCBkZWVwOiB0cnVlIH0sXHJcbiAgICAgIHsgc2VsZWN0b3I6ICcqJywgYXR0cmlidXRlczogWydzdHlsZScsICdjbGFzcyddLCBzcGxpdDogZmFsc2UsIGV4cGFuZDogZmFsc2UsIGRlZXA6IHRydWUgfVxyXG4gICAgXSxcclxuICAgIHRvb2xiYXI6IFwicmVkbyB1bmRvIGJvbGQgaXRhbGljIG51bWxpc3QgYnVsbGlzdCBsaW5rXCIsXHJcbiAgICBtZW51YmFyOiBmYWxzZSxcclxuICAgIGVkaXRvcl9zZWxlY3RvcjogXCJtY2VTaW1wbGVcIixcclxuICAgIHBhc3RlX2FzX3RleHQ6IHRydWVcclxuICB9KTtcclxuXHJcbiAgJCgnI3N1Ym1pdC1wcm9qZWN0LWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aW55TUNFLnRyaWdnZXJTYXZlKCk7XHJcbiAgICBpZiAodGlueU1DRS5nZXQoJ3Byb2plY3Rfb3V0Y29tZXMnKS5nZXRDb250ZW50KCkgIT0gJycpIHtcclxuICAgICAgdGlueU1DRS5nZXQoJ3Byb2plY3Rfb3V0Y29tZXMnKS5zZXRDb250ZW50KHJlbW92ZUV4Y2Vzc1doaXRlc3BhY2VGcm9tU3RyaW5nKHRpbnlNQ0UuZ2V0KCdwcm9qZWN0X291dGNvbWVzJykuZ2V0Q29udGVudCgpLnNwbGl0KCcmbmJzcDsnKS5qb2luKCcgJykpKTtcclxuICAgIH1cclxuICAgIGlmICh0aW55TUNFLmdldCgnbm92ZWx0eV9kZXNjJykuZ2V0Q29udGVudCgpICE9ICcnKSB7XHJcbiAgICAgIHRpbnlNQ0UuZ2V0KCdub3ZlbHR5X2Rlc2MnKS5zZXRDb250ZW50KHJlbW92ZUV4Y2Vzc1doaXRlc3BhY2VGcm9tU3RyaW5nKHRpbnlNQ0UuZ2V0KCdub3ZlbHR5X2Rlc2MnKS5nZXRDb250ZW50KCkuc3BsaXQoJyZuYnNwOycpLmpvaW4oJyAnKSkpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRpbnlNQ0UuZ2V0KCdhaW0nKS5nZXRDb250ZW50KCkgIT0gJycpIHtcclxuICAgICAgdGlueU1DRS5nZXQoJ2FpbScpLnNldENvbnRlbnQocmVtb3ZlRXhjZXNzV2hpdGVzcGFjZUZyb21TdHJpbmcodGlueU1DRS5nZXQoJ2FpbScpLmdldENvbnRlbnQoKS5zcGxpdCgnJm5ic3A7Jykuam9pbignICcpKSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGlueU1DRS5nZXQoJ2Rlc2NyaXB0aW9uJykuZ2V0Q29udGVudCgpICE9ICcnKSB7XHJcbiAgICAgIHRpbnlNQ0UuZ2V0KCdkZXNjcmlwdGlvbicpLnNldENvbnRlbnQocmVtb3ZlRXhjZXNzV2hpdGVzcGFjZUZyb21TdHJpbmcodGlueU1DRS5nZXQoJ2Rlc2NyaXB0aW9uJykuZ2V0Q29udGVudCgpLnNwbGl0KCcmbmJzcDsnKS5qb2luKCcgJykpKTtcclxuICAgIH1cclxuICAgIHRpbnlNQ0UudHJpZ2dlclNhdmUoKTtcclxuICAgICQoJyNwcm9qZWN0LWZvcm0nKS5zdWJtaXQoKTtcclxuICB9KTtcclxuXHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZUV4Y2Vzc1doaXRlc3BhY2VGcm9tU3RyaW5nKHN0cmluZykge1xyXG4gICAgdmFyIHN0cmluZ0xlbmd0aCA9IHN0cmluZy5sZW5ndGg7XHJcbiAgICB2YXIgb3V0cHV0U3RyaW5nID0gXCJcIjtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaW5nTGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgIGlmICghKHN0cmluZ1tpXSA9PT0gXCIgXCIgJiYgc3RyaW5nW2kgKyAxXSA9PT0gXCIgXCIgfHwgc3RyaW5nW2ldID09PSBcIiBcIiAmJiBzdHJpbmdbaSArIDFdID09PSBcIjxcIiB8fCBzdHJpbmdbaSAtIDFdID09PSBcIj5cIiAmJiBzdHJpbmdbaV0gPT09IFwiIFwiKSkge1xyXG4gICAgICAgIG91dHB1dFN0cmluZyArPSBzdHJpbmdbaV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChzdHJpbmdbc3RyaW5nTGVuZ3RoXSAhPT0gXCIgXCIpIHtcclxuICAgICAgb3V0cHV0U3RyaW5nICs9IHN0cmluZ1tzdHJpbmdMZW5ndGggLSAxXVxyXG4gICAgfVxyXG4gICAgLy8gUmVtb3ZpbmcgZW1wdHkgdGFnc1xyXG4gICAgdmFyIGhlbHBlciA9ICQoJzxkaXY+JykuYXBwZW5kKG91dHB1dFN0cmluZyk7XHJcbiAgICByZW1vdmVFbXB0eUlmTm9DaGlsZHJlbihoZWxwZXIpO1xyXG4gICAgb3V0cHV0U3RyaW5nID0gaGVscGVyLnByb3AoJ2lubmVySFRNTCcpO1xyXG4gICAgcmV0dXJuIG91dHB1dFN0cmluZztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZUVtcHR5SWZOb0NoaWxkcmVuKGVsZW1lbnQpIHtcclxuICAgIGlmIChlbGVtZW50LmNoaWxkcmVuKCkubGVuZ3RoID4gMCkge1xyXG4gICAgICBlbGVtZW50LmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmVtb3ZlRW1wdHlJZk5vQ2hpbGRyZW4oJCh0aGlzKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGVsZW1lbnQuaHRtbCgpID09PSBcIlwiKSB7XHJcbiAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL0Zyb250IHBhZ2UgbG9nbyB0cmFuc2xhdGlvblxyXG4gIGlmICh3aW5kb3cuTGFyYXZlbC5sYW5ndWFnZSA9PSAnZW4nKSB7XHJcbiAgICAkKCcuYmxvY2swMS5ibG9jazAxYiA+IC5wYWQnKS5jc3MoXCJiYWNrZ3JvdW5kXCIsICd1cmwoY3NzL2JnMDVfZW4ucG5nKSBuby1yZXBlYXQgNTAlIDUwJScpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAkKCcuYmxvY2swMS5ibG9jazAxYiA+IC5wYWQnKS5jc3MoXCJiYWNrZ3JvdW5kXCIsICd1cmwoY3NzL2JnMDUucG5nKSBuby1yZXBlYXQgNTAlIDUwJScpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vU2VsZWN0IHByb2plY3Qgc2hhcmUgdXJsIG9uIGNsaWNrIG9uIGlucHV0XHJcbiAgJChcImlucHV0W25hbWU9J3NoYXJlX3VybCddXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgJCh0aGlzKS5zZWxlY3QoKTtcclxuICB9KTtcclxuXHJcblxyXG4gIGlmICgkKFwiI3Byb2plY3RfYWxsX21lbWJlcnNcIikubGVuZ3RoKSB7XHJcblxyXG4gICAgLy9Qcm9qZWN0IGlkIHVzZWQgYnkgUHJvamVjdE1vZGVyYXRvciBtaWRkbGV3YXJlXHJcbiAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xyXG4gICAgdmFyIHNlZ21lbnRzID0gdXJsLnNwbGl0KCcvJyk7XHJcbiAgICB2YXIgcHJvamVjdF9pZCA9IHNlZ21lbnRzW3NlZ21lbnRzLmxlbmd0aCAtIDJdO1xyXG5cclxuXHJcbiAgICAvL0RyYWcgYW5kIGRyb3AgcHJvamVjdCBncm91cCBtZW1iZXJzIGZ1bmN0aW9uYWxpdHlcclxuICAgIFNvcnRhYmxlLmNyZWF0ZShwcm9qZWN0X2FsbF9tZW1iZXJzLCB7XHJcbiAgICAgIGdyb3VwOiB7IG5hbWU6IFwicHJvamVjdC1hbGwtbWVtYmVyc1wiLCBwdWxsOiB0cnVlLCBwdXQ6IHRydWUgfSxcclxuICAgICAgYW5pbWF0aW9uOiAxNTAsXHJcbiAgICAgIGhhbmRsZTogJy5kcmFnLWhhbmRsZSdcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBlbCA9ICQoJy5wcm9qZWN0LWdyb3VwJyk7XHJcbiAgICAkKGVsKS5lYWNoKGZ1bmN0aW9uIChpLCBlKSB7XHJcbiAgICAgIHZhciBzb3J0YWJsZSA9IFNvcnRhYmxlLmNyZWF0ZShlLCB7XHJcbiAgICAgICAgZ3JvdXA6IHtcclxuICAgICAgICAgIG5hbWU6IGVsLmF0dHIoJ2dyb3VwLWlkJyksXHJcbiAgICAgICAgICBwdWxsOiB0cnVlLFxyXG4gICAgICAgICAgcHV0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYW5pbWF0aW9uOiAxNTAsXHJcbiAgICAgICAgaGFuZGxlOiAnLmRyYWctaGFuZGxlJyxcclxuICAgICAgICBvbkFkZDogZnVuY3Rpb24gKGV2dCkge1xyXG5cclxuICAgICAgICAgIHZhciBpdGVtRWwgPSBldnQuaXRlbTsgIC8vIGRyYWdnZWQgSFRNTEVsZW1lbnRcclxuICAgICAgICAgIHZhciBmcm9tID0gZXZ0LmZyb207XHJcblxyXG5cclxuICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogd2luZG93LkxhcmF2ZWwuYWRkX3VzZXJfdG9fZ3JvdXBfYXBpX3VybCxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgZGVsYXk6IDI1MCxcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG5cclxuICAgICAgICAgICAgICBpZDogcHJvamVjdF9pZCxcclxuICAgICAgICAgICAgICB0bzogJChpdGVtRWwpLnBhcmVudCgpLmF0dHIoJ2dyb3VwLWlkJyksXHJcbiAgICAgICAgICAgICAgZnJvbTogJChmcm9tKS5hdHRyKCdncm91cC1pZCcpLFxyXG4gICAgICAgICAgICAgIHVzZXI6ICQoaXRlbUVsKS5hdHRyKCd1c2VyLWlkJylcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pLmRvbmUoZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICAgICAgICBpZiAoJCgnYSNncm91cHMtZmluaXNoLWJ1dHRvbicpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICQoJ2EjZ3JvdXBzLWZpbmlzaC1idXR0b24nKS5hZGRDbGFzcygnbm90LWVtcHR5Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH0pO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG5cclxuICAvL0NvcHkgdXNlciBtYWluIFRMVSBlbWFpbCBpbnRvIGNvbnRhY3QgZW1haWwgZmllbGRzLCB1c2VkIG9uIHByb2ZpbGUgcGFnZVxyXG4gICQoXCIjZmlsbGVyXCIpLmNsaWNrKGZpbGxWYWx1ZXMpO1xyXG5cclxuXHJcbiAgZnVuY3Rpb24gZmlsbFZhbHVlcygpIHtcclxuICAgIHZhciB2YWx1ZSA9ICQoXCIjdGx1X2VtYWlsXCIpLnZhbCgpO1xyXG4gICAgdmFyIGZpZWxkcyA9ICQoXCIuY29udGFjdC1lbWFpbFwiKTtcclxuICAgIGZpZWxkcy5lYWNoKGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICQodGhpcykudmFsKHZhbHVlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG5cclxuICAvL0FkZCBjdXN0b20gaW5zdGl0dXRpb24gZmllbGQgaW4gdXNlciByZWdpc3RyYXRpb24gZm9ybVxyXG4gICQoJyNpbnN0aXR1dGlvbicpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoJCh0aGlzKS52YWwoKSA9PT0gd2luZG93LkxhcmF2ZWwub3RoZXJfaW5zdGl0dXRpb24pIHtcclxuICAgICAgJChcIiNvdGhlci1pbnN0aXR1dGlvblwiKS5zaG93KClcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAkKFwiI290aGVyLWluc3RpdHV0aW9uXCIpLmhpZGUoKVxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuXHJcblxyXG5cclxuICAvLyBBZGQgbmV3IGdyb3VwIGxpbmtzIGlucHV0IGZpZWxkXHJcbiAgdmFyIGFkZF9saW5rc19maWVsZF9idXR0b25zID0gJChcIi5hZGRfbGlua3NfZmllbGRfYnV0dG9uXCIpO1xyXG5cclxuICBhZGRfbGlua3NfZmllbGRfYnV0dG9ucy5lYWNoKGZ1bmN0aW9uIChpLCBvYmopIHtcclxuICAgIHZhciBncm91cF9pZCA9ICQob2JqKS5hdHRyKFwiZ3JvdXAtaWRcIik7XHJcbiAgICAkKG9iaikuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB2YXIgJGRpdiA9ICQodGhpcykubmV4dChcIi5ncm91cC1tYXRlcmlhbHNcIikuY2hpbGRyZW4oKS5sYXN0KCk7XHJcblxyXG4gICAgICB2YXIgbnVtID0gJGRpdi5wcm9wKFwiaWRcIik7XHJcblxyXG4gICAgICBudW0gPSBwYXJzZUludChudW0uc3BsaXQoXCJfXCIpLnBvcCgpKTtcclxuXHJcblxyXG4gICAgICB2YXIgY2xvbmUgPSAkKCRkaXYpLmNsb25lKCk7XHJcbiAgICAgIGNsb25lLnByb3AoJ2lkJywgJ2dyb3VwX21hdGVyaWFsc18nICsgZ3JvdXBfaWQgKyAnXycgKyAobnVtICsgMSkpO1xyXG4gICAgICBjbG9uZS5maW5kKFwiaW5wdXRcIikudmFsKFwiXCIpO1xyXG4gICAgICBjbG9uZS5pbnNlcnRBZnRlcigkZGl2KTtcclxuXHJcbiAgICAgIHZhciB0YWdzaW5wdXQgPSBjbG9uZS5maW5kKCcudGFncycpO1xyXG4gICAgICBjbG9uZS5maW5kKCcuYm9vdHN0cmFwLXRhZ3NpbnB1dCcpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgJCh0YWdzaW5wdXQpLmF0dHIoJ25hbWUnLCAnZ3JvdXBfbWF0ZXJpYWxfdGFnc1snICsgZ3JvdXBfaWQgKyAnXVtdJyk7XHJcbiAgICAgICQodGFnc2lucHV0KS5hZGRDbGFzcygnZm9ybS1jb250cm9sIHRhZ3MnKTtcclxuICAgICAgdGFnc2lucHV0LnRhZ3NpbnB1dCgpO1xyXG4gICAgICB0YWdzaW5wdXQudGFnc2lucHV0KCdyZW1vdmVBbGwnKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgfSk7XHJcblxyXG4gIH0pO1xyXG5cclxuXHJcblxyXG5cclxuICAvLyBSZW1vdmUgZ3JvdXAgbGlua3MgaW5wdXQgZmllbGRcclxuICB2YXIgcmVtb3ZlX2xpbmtzX2ZpZWxkX2J1dHRvbiA9ICQoXCIucmVtb3ZlX2xpbmtzX2ZpZWxkX2J1dHRvblwiKTtcclxuXHJcbiAgcmVtb3ZlX2xpbmtzX2ZpZWxkX2J1dHRvbi5lYWNoKGZ1bmN0aW9uIChpLCBvYmopIHtcclxuICAgIHZhciBncm91cF9pZCA9ICQob2JqKS5hdHRyKFwiZ3JvdXAtaWRcIik7XHJcbiAgICAkKG9iaikuY2xpY2soZnVuY3Rpb24gKGUpIHtcclxuXHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdmFyICRkaXYgPSAkKHRoaXMpLnBhcmVudCgpLmNoaWxkcmVuKFwiOmxhc3QtY2hpbGRcIik7XHJcblxyXG4gICAgICB2YXIgbnVtID0gJGRpdi5wcm9wKFwiaWRcIik7XHJcblxyXG4gICAgICBudW0gPSBwYXJzZUludChudW0uc3BsaXQoXCJfXCIpLnBvcCgpKTtcclxuXHJcbiAgICAgIGlmIChudW0gPiAwKSB7XHJcbiAgICAgICAgJGRpdi5yZW1vdmUoKTtcclxuICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG5cclxuXHJcbiAgJCgnW2RhdGEtdG9nZ2xlPVwicG9wb3ZlclwiXScpLnBvcG92ZXIoKTtcclxuXHJcblxyXG4gICQoJyNjbGVhci1lbWJlZGRlZCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICQoJyNlbWJlZGRlZCcpXHJcbiAgICAgIC52YWwoJycpXHJcbiAgfSk7XHJcblxyXG5cclxuICAkKCcjY2xlYXItZ3JvdXAtZW1iZWRkZWQnKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAkKHRoaXMpLnByZXYoJ2lucHV0JykudmFsKCcnKTtcclxuICB9KTtcclxuXHJcblxyXG4gICQoJ2JvZHknKS50b29sdGlwKHtcclxuICAgIHNlbGVjdG9yOiAnW3JlbD1cInRvb2x0aXBcIl0nXHJcbiAgfSk7XHJcblxyXG5cclxuICAvL0dyb3VwIHRpdGxlIHJlbmFtaW5nO1xyXG4gICQoJy5ncm91cC1uYW1lJykuZWRpdGFibGUoe1xyXG4gICAgc2VuZDogJ2Fsd2F5cycsXHJcbiAgICBhamF4T3B0aW9uczoge1xyXG4gICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICB0eXBlOiAncG9zdCcsXHJcblxyXG4gICAgfSxcclxuICAgIHBhcmFtczogZnVuY3Rpb24gKHBhcmFtcykge1xyXG4gICAgICAvL29yaWdpbmFsbHkgcGFyYW1zIGNvbnRhaW4gcGssIG5hbWUgYW5kIHZhbHVlXHJcbiAgICAgIHBhcmFtcy5pZCA9ICQodGhpcykuY2xvc2VzdChcImRpdlwiKS5hdHRyKFwicHJvamVjdC1pZFwiKTtcclxuICAgICAgcmV0dXJuIHBhcmFtcztcclxuICAgIH1cclxuXHJcbiAgfSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxufSk7XHJcblxyXG5Ecm9wem9uZS5hdXRvRGlzY292ZXIgPSBmYWxzZTtcclxuRHJvcHpvbmUucHJvdG90eXBlLmRlZmF1bHRPcHRpb25zLmRpY3RSZW1vdmVGaWxlID0gd2luZG93LkxhcmF2ZWwucmVtb3ZlX2ZpbGVfYnV0dG9uO1xyXG5cclxudmFyIGRyb3B6b25lcyA9ICQoXCIuZHJvcHpvbmVcIik7XHJcbmRyb3B6b25lcy5lYWNoKGZ1bmN0aW9uIChpKSB7XHJcbiAgaWYgKHRoaXMuaWQuaW5kZXhPZihcInByZXNlbnRhdGlvblVwbG9hZFwiKSAhPT0gLTEpIHtcclxuICAgIHZhciByZXNvdXJjZU5hbWUgPSBcIlBvc3RlclwiO1xyXG4gICAgdmFyIGFjY2VwdGVkID0gXCJhcHBsaWNhdGlvbi9wZGZcIjtcclxuICAgIHZhciBtYXhOdW1iZXJPZkZpbGVzID0gMTtcclxuICAgIHZhciBncm91cF9pZCA9IHBhcnNlSW50KCQodGhpcykucHJvcChcImlkXCIpLm1hdGNoKC9cXGQrL2cpLCAxMCk7XHJcblxyXG4gICAgdmFyIHByb2plY3RfaWQgPSAkKFwiI3ByZXNlbnRhdGlvblVwbG9hZFwiICsgZ3JvdXBfaWQpLmF0dHIoXCJwcm9qZWN0LWlkXCIpO1xyXG4gICAgdmFyIGRyb3B6b25lX25hbWUgPSBcIiNwcmVzZW50YXRpb25VcGxvYWRcIiArIGdyb3VwX2lkO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB2YXIgcmVzb3VyY2VOYW1lID0gXCJNYXRlcmlhbHNcIjtcclxuICAgIHZhciBhY2NlcHRlZCA9IFwiXCI7XHJcbiAgICB2YXIgbWF4TnVtYmVyT2ZGaWxlcyA9IDEwMDtcclxuICAgIHZhciBncm91cF9pZCA9IHBhcnNlSW50KCQodGhpcykucHJvcChcImlkXCIpLm1hdGNoKC9cXGQrL2cpLCAxMCk7XHJcblxyXG4gICAgdmFyIHByb2plY3RfaWQgPSAkKFwiI21hdGVyaWFsc1VwbG9hZFwiICsgZ3JvdXBfaWQpLmF0dHIoXCJwcm9qZWN0LWlkXCIpO1xyXG4gICAgdmFyIGRyb3B6b25lX25hbWUgPSBcIiNtYXRlcmlhbHNVcGxvYWRcIiArIGdyb3VwX2lkO1xyXG4gIH1cclxuICBpZiAodGhpcy5nZXRBdHRyaWJ1dGUoJ2F1dGgnKSA9PSAnc3R1ZGVudCcpIHtcclxuICAgIHZhciByb3V0ZVRvID0gJ2ZpbmlzaCc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHZhciByb3V0ZVRvID0gJ3Byb2plY3QnO1xyXG4gIH1cclxuXHJcbiAgdmFyIG15RHJvcHpvbmUgPSBuZXcgRHJvcHpvbmUoZHJvcHpvbmVfbmFtZSwge1xyXG4gICAgdXJsOiB3aW5kb3cuTGFyYXZlbC5iYXNlX3BhdGggKyBcIi9cIiArIHJvdXRlVG8gKyBcIi9cIiArIHByb2plY3RfaWQgKyBcIi9maW5pc2gvdXBsb2FkXCIgKyByZXNvdXJjZU5hbWUsXHJcbiAgICBwYXJhbXM6IHtcclxuICAgICAgaWQ6IHByb2plY3RfaWQsXHJcbiAgICAgIF90b2tlbjogd2luZG93LkxhcmF2ZWwuY3Nmcl90b2tlbixcclxuICAgICAgZ3JvdXBfaWQ6IGdyb3VwX2lkXHJcbiAgICB9LFxyXG4gICAgdGltZW91dDogMCxcclxuICAgIHBhcmFsbGVsVXBsb2FkczogMSxcclxuICAgIHBhcmFtTmFtZTogXCJmaWxlXCIsXHJcbiAgICBhY2NlcHRlZEZpbGVzOiBhY2NlcHRlZCxcclxuICAgIG1heEZpbGVzOiBtYXhOdW1iZXJPZkZpbGVzLFxyXG4gICAgbWF4RmlsZXNpemU6IDMwLCAvLyBNQlxyXG5cclxuICAgIGFkZFJlbW92ZUxpbmtzOiB0cnVlLFxyXG5cclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcblxyXG4gICAgICAvLyBBZGQgc2VydmVyIGltYWdlc1xyXG4gICAgICB2YXIgbXlEcm9wem9uZSA9IHRoaXM7XHJcblxyXG4gICAgICAkLmdldCh3aW5kb3cuTGFyYXZlbC5iYXNlX3BhdGggKyBcIi9cIiArIHJvdXRlVG8gKyBcIi9cIiArIHByb2plY3RfaWQgKyBcIi9hcGkvZ3JvdXAtXCIgKyByZXNvdXJjZU5hbWUgKyBcIj9ncm91cGlkPVwiICsgZ3JvdXBfaWQsIGZ1bmN0aW9uIChkYXRhKSB7XHJcblxyXG5cclxuICAgICAgICAkLmVhY2goZGF0YS5pbWFnZXMsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICB2YXIgZmlsZSA9IHsgbmFtZTogdmFsdWUuZmlsZW5hbWUsIHNpemU6IHZhbHVlLnNpemUgfTtcclxuICAgICAgICAgIG15RHJvcHpvbmUub3B0aW9ucy5hZGRlZGZpbGUuY2FsbChteURyb3B6b25lLCBmaWxlKTtcclxuICAgICAgICAgIG15RHJvcHpvbmUuY3JlYXRlVGh1bWJuYWlsRnJvbVVybChmaWxlLCB3aW5kb3cuTGFyYXZlbC5iYXNlX3BhdGggKyBcIi9zdG9yYWdlL3Byb2plY3RzX2dyb3Vwc19pbWFnZXMvXCIgKyBncm91cF9pZCArIFwiL1wiICsgdmFsdWUubmFtZSk7XHJcbiAgICAgICAgICBteURyb3B6b25lLmVtaXQoXCJjb21wbGV0ZVwiLCBmaWxlKTtcclxuICAgICAgICAgIHZhciBidG5kZWxldGUgPSBmaWxlLnByZXZpZXdFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1kei1yZW1vdmVdXCIpO1xyXG4gICAgICAgICAgYnRuZGVsZXRlLnNldEF0dHJpYnV0ZShcImlkXCIsICdkZWxldGUtbWVkaWEtbmFtZS0nICsgdmFsdWUubmFtZSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMub24oXCJyZW1vdmVkZmlsZVwiLCBmdW5jdGlvbiAoZmlsZSkge1xyXG5cclxuICAgICAgICB2YXIgYnRuZGVsZXRlID0gZmlsZS5wcmV2aWV3RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtZHotcmVtb3ZlXVwiKTtcclxuICAgICAgICBpZiAoYnRuZGVsZXRlLmhhc0F0dHJpYnV0ZShcImlkXCIpKSB7XHJcbiAgICAgICAgICB2YXIgZmlsZW5hbWUgPSBidG5kZWxldGUuZ2V0QXR0cmlidXRlKFwiaWRcIikuc3Vic3RyKDE4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICB1cmw6IHdpbmRvdy5MYXJhdmVsLmJhc2VfcGF0aCArIFwiL1wiICsgcm91dGVUbyArIFwiL1wiICsgcHJvamVjdF9pZCArIFwiL2ZpbmlzaC9kZWxldGVcIiArIHJlc291cmNlTmFtZSxcclxuICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICBkZWxheTogMjUwLFxyXG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICBjYWNoZTogZmFsc2UsXHJcbiAgICAgICAgICBkYXRhOiB7XHJcblxyXG4gICAgICAgICAgICBpZDogcHJvamVjdF9pZCxcclxuICAgICAgICAgICAgbmFtZTogZmlsZW5hbWUsXHJcbiAgICAgICAgICAgIGdyb3VwX2lkOiBncm91cF9pZFxyXG5cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KS5kb25lKGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgc3VjY2VzczogZnVuY3Rpb24gKGZpbGUsIHNlcnZlclJlc3BvbnNlKSB7XHJcbiAgICAgIHZhciBmaWxldXBsb2RlZCA9IGZpbGUucHJldmlld0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLWR6LW5hbWVdXCIpO1xyXG4gICAgICBmaWxldXBsb2RlZC5pbm5lckhUTUwgPSBzZXJ2ZXJSZXNwb25zZS5uZXdmaWxlbmFtZTtcclxuICAgICAgdmFyIGJ0bmRlbGV0ZSA9IGZpbGUucHJldmlld0VsZW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLWR6LXJlbW92ZV1cIik7XHJcbiAgICAgIGJ0bmRlbGV0ZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCAnZGVsZXRlLW1lZGlhLW5hbWUtJyArIHNlcnZlclJlc3BvbnNlLm5ld2ZpbGVuYW1lKTtcclxuICAgICAgd2luZG93LmFsZXJ0KCdVcGxvYWQgc3VjY2Vzc2Z1bCcpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59KTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vKlxyXG4gIFNlbmRpbmcgREVMRVRFIHJlcXVlc3Qgd2l0aG91dCBhIGZvcm1cclxuICBFeGFtcGxlOlxyXG4gIDxhIGhyZWY9XCJwb3N0cy8yXCIgZGF0YS1tZXRob2Q9XCJkZWxldGVcIiBkYXRhLXRva2VuPVwie3tjc3JmX3Rva2VuKCl9fVwiPlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcblxyXG4gIHZhciBsYXJhdmVsID0ge1xyXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICB0aGlzLm1ldGhvZExpbmtzID0gJCgnYVtkYXRhLW1ldGhvZF0nKTtcclxuICAgICAgdGhpcy50b2tlbiA9ICQoJ2FbZGF0YS10b2tlbl0nKTtcclxuICAgICAgdGhpcy5yZWdpc3RlckV2ZW50cygpO1xyXG4gICAgfSxcclxuXHJcbiAgICByZWdpc3RlckV2ZW50czogZnVuY3Rpb24gKCkge1xyXG4gICAgICB0aGlzLm1ldGhvZExpbmtzLm9uKCdjbGljaycsIHRoaXMuaGFuZGxlTWV0aG9kKTtcclxuICAgIH0sXHJcblxyXG4gICAgaGFuZGxlTWV0aG9kOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICB2YXIgbGluayA9ICQodGhpcyk7XHJcbiAgICAgIHZhciBodHRwTWV0aG9kID0gbGluay5kYXRhKCdtZXRob2QnKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICB2YXIgZm9ybTtcclxuXHJcbiAgICAgIC8vIElmIHRoZSBkYXRhLW1ldGhvZCBhdHRyaWJ1dGUgaXMgbm90IFBVVCBvciBERUxFVEUsXHJcbiAgICAgIC8vIHRoZW4gd2UgZG9uJ3Qga25vdyB3aGF0IHRvIGRvLiBKdXN0IGlnbm9yZS5cclxuICAgICAgaWYgKCQuaW5BcnJheShodHRwTWV0aG9kLCBbJ1BVVCcsICdERUxFVEUnXSkgPT09IC0gMSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQWxsb3cgdXNlciB0byBvcHRpb25hbGx5IHByb3ZpZGUgZGF0YS1jb25maXJtPVwiQXJlIHlvdSBzdXJlP1wiXHJcbiAgICAgIGlmIChsaW5rLmRhdGEoJ2NvbmZpcm0nKSkge1xyXG4gICAgICAgIGlmICghbGFyYXZlbC52ZXJpZnlDb25maXJtKGxpbmspKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBmb3JtID0gbGFyYXZlbC5jcmVhdGVGb3JtKGxpbmspO1xyXG4gICAgICBmb3JtLnN1Ym1pdCgpO1xyXG5cclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICB2ZXJpZnlDb25maXJtOiBmdW5jdGlvbiAobGluaykge1xyXG4gICAgICByZXR1cm4gY29uZmlybShsaW5rLmRhdGEoJ2NvbmZpcm0nKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNyZWF0ZUZvcm06IGZ1bmN0aW9uIChsaW5rKSB7XHJcbiAgICAgIHZhciBmb3JtID1cclxuICAgICAgICAkKCc8Zm9ybT4nLCB7XHJcbiAgICAgICAgICAnbWV0aG9kJzogJ1BPU1QnLFxyXG4gICAgICAgICAgJ2FjdGlvbic6IGxpbmsuYXR0cignaHJlZicpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICB2YXIgdG9rZW4gPVxyXG4gICAgICAgICQoJzxpbnB1dD4nLCB7XHJcbiAgICAgICAgICAndHlwZSc6ICdoaWRkZW4nLFxyXG4gICAgICAgICAgJ25hbWUnOiAnX3Rva2VuJyxcclxuICAgICAgICAgICd2YWx1ZSc6IGxpbmsuZGF0YSgndG9rZW4nKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgdmFyIGhpZGRlbklucHV0ID1cclxuICAgICAgICAkKCc8aW5wdXQ+Jywge1xyXG4gICAgICAgICAgJ25hbWUnOiAnX21ldGhvZCcsXHJcbiAgICAgICAgICAndHlwZSc6ICdoaWRkZW4nLFxyXG4gICAgICAgICAgJ3ZhbHVlJzogbGluay5kYXRhKCdtZXRob2QnKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIGZvcm0uYXBwZW5kKHRva2VuLCBoaWRkZW5JbnB1dClcclxuICAgICAgICAuYXBwZW5kVG8oJ2JvZHknKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBsYXJhdmVsLmluaXRpYWxpemUoKTtcclxuXHJcbn0pKCk7XHJcblxyXG5cclxuXHJcbi8vIFNob3cgb3IgaGlkZSBhZGRpdGlvbmFsIHF1ZXN0aW9uIGlucHV0IGZpZWxkXHJcbmNvbnN0IGFkZF9xdWVzdGlvbl9maWVsZF9idXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkX3F1ZXN0aW9uX2ZpZWxkX2J1dHRvbicpO1xyXG5jb25zdCByZW1vdmVfcXVlc3Rpb25fZmllbGRfYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlbW92ZV9xdWVzdGlvbl9maWVsZF9idXR0b24nKTtcclxuY29uc3QgZXh0cmFfcSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5leHRyYV9xJyk7XHJcbmxldCBxX2NvdW50ZXIgPSAtMTsgLy8gLTEgPT4gbm8gYWRkaXRpb25hbCBxdWVzdGlvbnMsIDAgPT4gb25lIHF1ZXN0aW9uLCAxID0+IHR3byBxdWVzdGlvbnNcclxuXHJcbmlmIChleHRyYV9xLmxlbmd0aCAhPT0gMCkge1xyXG4gIGlmICghZXh0cmFfcVswXS5oYXNBdHRyaWJ1dGUoJ2hpZGRlbicpKSB7XHJcbiAgICBxX2NvdW50ZXIgPSAwO1xyXG4gIH1cclxuICBpZiAoIWV4dHJhX3FbMV0uaGFzQXR0cmlidXRlKCdoaWRkZW4nKSkge1xyXG4gICAgcV9jb3VudGVyID0gMTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGhhbmRsZV9hZGRfYnV0dG9uX2NsaWNrID0gKCkgPT4ge1xyXG4gICAgaWYgKHFfY291bnRlciA8IDEpIHtcclxuICAgICAgcV9jb3VudGVyKys7XHJcbiAgICB9XHJcbiAgICBleHRyYV9xW3FfY291bnRlcl0uaGlkZGVuID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBjb25zdCBoYW5kbGVfcmVtb3ZlX2J1dHRvbl9jbGljayA9ICgpID0+IHtcclxuICAgIGlmIChxX2NvdW50ZXIgPiAtMSkge1xyXG4gICAgICBleHRyYV9xW3FfY291bnRlcl0uaGlkZGVuID0gdHJ1ZTtcclxuICAgICAgLy9yZW1vdmUgdXNlciBpbnB1dFxyXG4gICAgICBleHRyYV9xW3FfY291bnRlcl0ubGFzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC52YWx1ZSA9ICcnO1xyXG4gICAgICBxX2NvdW50ZXItLTtcclxuICAgIH1cclxuICB9XHJcbiAgYWRkX3F1ZXN0aW9uX2ZpZWxkX2J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZV9hZGRfYnV0dG9uX2NsaWNrKTtcclxuICByZW1vdmVfcXVlc3Rpb25fZmllbGRfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlX3JlbW92ZV9idXR0b25fY2xpY2spO1xyXG59XHJcblxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gcmVzb3VyY2VzL2Fzc2V0cy9qcy9hcHAuanMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBc0JBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }
/******/ ]);