!function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t){jQuery(document).ready(function(e){function t(e){function t(e){}var n={method:"feed",link:e};FB.ui(n,t)}function n(t){for(var n=t.length,o="",i=0;i<n-1;i++)" "===t[i]&&" "===t[i+1]||" "===t[i]&&"<"===t[i+1]||">"===t[i-1]&&" "===t[i]||(o+=t[i]);" "!==t[n]&&(o+=t[n-1]);var r=e("<div>").append(o);return a(r),o=r.prop("innerHTML")}function a(t){t.children().length>0&&t.children().each(function(){a(e(this))}),""===t.html()&&t.remove()}function o(){var t=e("#tlu_email").val(),n=e(".contact-email");n.each(function(n){e(this).val(t)})}e.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),e("#project_start").datetimepicker({format:"L"}),e("#project_end").datetimepicker({format:"L"}),e("#join_deadline").datetimepicker({format:"L"}),e(".evaluation-dates").datetimepicker({format:"L"}),e("#project_start").datetimepicker(),e("#project_end").datetimepicker({useCurrent:!1}),e("#project_start").on("dp.change",function(t){e("#project_end").data("DateTimePicker").minDate(t.date)}),e("#project_end").on("dp.change",function(t){e("#project_start").data("DateTimePicker").maxDate(t.date)}),e("input #tags").on("change",function(t){var n=e(t.target),a=n.closest(".example"),o=n.val();null===o&&(o="null"),e("code",e("pre.val",a)).html(e.isArray(o)?JSON.stringify(o):'"'+o.replace('"','\\"')+'"'),e("code",e("pre.items",a)).html(JSON.stringify(n.tagsinput("items")))}).trigger("change"),e("button#delete").on("click",function(t){swal({title:window.Laravel.are_you_sure_notification,text:window.Laravel.cannot_restore_notification,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:window.Laravel.yes_delete,cancelButtonText:window.Laravel.no,closeOnConfirm:!1},function(){e(t.target).prev(".delete-project").submit()})}),e("button#delete-user-button").on("click",function(t){swal({title:window.Laravel.are_you_sure_notification,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:window.Laravel.yes_delete,cancelButtonText:window.Laravel.no,closeOnConfirm:!1},function(){e(t.target).prev(".delete-user").submit()})}),e("a#groups-finish-button").on("click",function(t){e("a#groups-finish-button").hasClass("not-empty")||(t.preventDefault(),swal({title:window.Laravel.finish_project_notification,type:"info",confirmButtonText:window.Laravel.yes,closeOnConfirm:!1}))}),e(".js-example-basic-multiple").select2(),e(".js-users-data-ajax").select2({placeholder:window.Laravel.name_or_email_placeholder,language:{inputTooShort:function(){return window.Laravel.three_or_more_char}},allowClear:!0,ajax:{url:window.Laravel.search_user_api_url,dataType:"json",delay:250,method:"POST",data:function(t){return{q:t.term,project_id:e(".js-users-data-ajax").attr("project-id"),page:t.page}},processResults:function(t){return{results:e.map(t,function(e){return{text:(e.full_name?e.full_name:e.name)+" ("+(e.contact_email?e.contact_email:e.email)+")",id:e.id}})}},cache:!1},escapeMarkup:function(e){return e},minimumInputLength:3}),e('body.frontpage a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=e(this.hash);if(t=t.length?t:e("[name="+this.hash.slice(1)+"]"),t.length)return e("html, body").animate({scrollTop:t.offset().top},1e3),!1}});var i=window.location.hash;i.startsWith("#item")&&i&&e('ul.nav a[href="'+i+'"]').tab("show"),e(".search-panel .navbar-nav").find("a").click(function(t){t.preventDefault();var n=e(this).attr("href").replace("#",""),a=e(this).text();e(".search-panel span#search_concept").text(a),e(".form-group #search_param").val(n)});var r=".search-panel .navbar-nav li";if(e(r).on("click",function(){e(r).removeClass("active"),e(this).addClass("active")}),e(".panel-heading span.clickable").parents(".panel").find(".panel-body").slideUp(),e(".panel-heading span.clickable").on("click",function(t){var n=e(this);n.hasClass("panel-collapsed")?(n.parents(".panel").find(".panel-body").slideDown(),n.removeClass("panel-collapsed"),n.find("i").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up")):(n.parents(".panel").find(".panel-body").slideUp(),n.addClass("panel-collapsed"),n.find("i").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down"))}),e(".btnShare").click(function(){return elem=e(this),t(elem.prop("href")),!1}),tinyMCE.baseURL=window.Laravel.base_path+"/js/tinymce",tinymce.init({mode:"textareas",theme:"modern",language:window.Laravel.language,plugins:["link","paste"],menubar:!1,toolbar:"link",removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}],selection_toolbar:"bold italic | quicklink h2 h3 blockquote",editor_selector:"mceSimpleLink",paste_as_text:!0}),tinyMCE.init({mode:"textareas",language:window.Laravel.language,plugins:["link","lists","paste","noneditable","preventdelete"],height:"350",removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}],toolbar:"redo undo bold italic numlist bullist link",menubar:!1,editor_selector:"mceSimple",paste_as_text:!0}),e("#submit-project-button").on("click",function(t){t.preventDefault(),tinyMCE.triggerSave(),tinyMCE.get("project_outcomes").setContent(n(tinyMCE.get("project_outcomes").getContent().split("&nbsp;").join(" "))),tinyMCE.get("novelty_desc").setContent(n(tinyMCE.get("novelty_desc").getContent().split("&nbsp;").join(" "))),tinyMCE.get("aim").setContent(n(tinyMCE.get("aim").getContent().split("&nbsp;").join(" "))),tinyMCE.get("description").setContent(n(tinyMCE.get("description").getContent().split("&nbsp;").join(" "))),tinyMCE.triggerSave(),e("#project-form").submit()}),"en"==window.Laravel.language?e(".block01.block01b > .pad").css("background","url(css/bg05_en.png) no-repeat 50% 50%"):e(".block01.block01b > .pad").css("background","url(css/bg05.png) no-repeat 50% 50%"),e("input[name='share_url']").on("click",function(){e(this).select()}),e("#project_all_members").length){var l=window.location.pathname,s=l.split("/"),c=s[s.length-2];Sortable.create(project_all_members,{group:{name:"project-all-members",pull:!0,put:!0},animation:150,handle:".drag-handle"});var p=e(".project-group");e(p).each(function(t,n){Sortable.create(n,{group:{name:p.attr("group-id"),pull:!0,put:function(){return!0}},animation:150,handle:".drag-handle",onAdd:function(t){var n=t.item,a=t.from;e.ajax({url:window.Laravel.add_user_to_group_api_url,dataType:"json",delay:250,method:"POST",cache:!1,data:{id:c,to:e(n).parent().attr("group-id"),from:e(a).attr("group-id"),user:e(n).attr("user-id")}}).done(function(t){e("a#groups-finish-button").length&&e("a#groups-finish-button").addClass("not-empty")})}})})}e("#filler").click(o),e("#institution").on("change",function(){e(this).val()===window.Laravel.other_institution?e("#other-institution").show():e("#other-institution").hide()});var d=e(".add_links_field_button");d.each(function(t,n){var a=e(n).attr("group-id");e(n).click(function(t){t.preventDefault();var n=e(this).next(".group-materials").children().last(),o=n.prop("id");o=parseInt(o.split("_").pop());var i=e(n).clone();i.prop("id","group_materials_"+a+"_"+(o+1)),i.find("input").val(""),i.insertAfter(n);var r=i.find(".tags");i.find(".bootstrap-tagsinput").remove(),e(r).attr("name","group_material_tags["+a+"][]"),e(r).addClass("form-control tags"),r.tagsinput(),r.tagsinput("removeAll")})});var u=e(".remove_links_field_button");u.each(function(t,n){e(n).attr("group-id");e(n).click(function(t){t.preventDefault();var n=e(this).parent().children(":last-child"),a=n.prop("id");a=parseInt(a.split("_").pop()),a>0&&n.remove()})}),e('[data-toggle="popover"]').popover(),e("#clear-embedded").click(function(){e("#embedded").val("")}),e("#clear-group-embedded").click(function(){e(this).prev("input").val("")}),e("body").tooltip({selector:'[rel="tooltip"]'}),e(".group-name").editable({send:"always",ajaxOptions:{dataType:"json",type:"post"},params:function(t){return t.id=e(this).closest("div").attr("project-id"),t}})}),Dropzone.autoDiscover=!1,Dropzone.prototype.defaultOptions.dictRemoveFile=window.Laravel.remove_file_button;var n=$(".dropzone");n.each(function(e){var t=parseInt($(this).prop("id").match(/\d+/g),10),n=$("#groupImagesUpload"+t).attr("project-id"),a="#groupImagesUpload"+t;new Dropzone(a,{url:window.Laravel.base_path+"/project/"+n+"/finish/uploadFiles",params:{id:n,_token:window.Laravel.csfr_token,group_id:t},parallelUploads:20,paramName:"file",maxFilesize:2,addRemoveLinks:!0,init:function(){var e=this;$.get(window.Laravel.base_path+"/project/"+n+"/api/group-images?groupid="+t,function(n){$.each(n.images,function(n,a){var o={name:a.name,size:a.size};e.options.addedfile.call(e,o),e.createThumbnailFromUrl(o,window.Laravel.base_path+"/storage/projects_groups_images/"+t+"/"+a.name),e.emit("complete",o);var i=o.previewElement.querySelector("[data-dz-remove]");i.setAttribute("id","delete-media-name-"+a.name)})}),this.on("removedfile",function(e){var a=e.previewElement.querySelector("[data-dz-remove]");if(a.hasAttribute("id"))var o=a.getAttribute("id").split("-").pop();$.ajax({url:window.Laravel.base_path+"/project/"+n+"/finish/deleteFile",dataType:"json",delay:250,method:"POST",cache:!1,data:{id:n,name:o,group_id:t}}).done(function(e){})})},success:function(e,t){var n=e.previewElement.querySelector("[data-dz-name]");n.innerHTML=t.newfilename;var a=e.previewElement.querySelector("[data-dz-remove]");a.setAttribute("id","delete-media-name-"+t.newfilename)}})}),function(){var e={initialize:function(){this.methodLinks=$("a[data-method]"),this.token=$("a[data-token]"),this.registerEvents()},registerEvents:function(){this.methodLinks.on("click",this.handleMethod)},handleMethod:function(t){var n,a=$(this),o=a.data("method").toUpperCase();if($.inArray(o,["PUT","DELETE"])!==-1){if(a.data("confirm")&&!e.verifyConfirm(a))return!1;n=e.createForm(a),n.submit(),t.preventDefault()}},verifyConfirm:function(e){return confirm(e.data("confirm"))},createForm:function(e){var t=$("<form>",{method:"POST",action:e.attr("href")}),n=$("<input>",{type:"hidden",name:"_token",value:e.data("token")}),a=$("<input>",{name:"_method",type:"hidden",value:e.data("method")});return t.append(n,a).appendTo("body")}};e.initialize()}()}]);